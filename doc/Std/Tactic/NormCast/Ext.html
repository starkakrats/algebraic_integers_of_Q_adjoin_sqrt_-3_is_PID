<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../.././style.css"></link><link rel="stylesheet" href="../../.././src/pygments.css"></link><link rel="shortcut icon" href="../../.././favicon.ico"></link><link rel="prefetch" href="../../.././/declarations/declaration-data.bmp" as="image"></link><title>Std.Tactic.NormCast.Ext</title><script defer="true" src="../../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../.././";</script><script>const MODULE_NAME="Std.Tactic.NormCast.Ext";</script><script type="module" src="../../.././jump-src.js"></script><script type="module" src="../../.././search.js"></script><script type="module" src="../../.././expand-nav.js"></script><script type="module" src="../../.././how-about.js"></script><script type="module" src="../../.././instances.js"></script><script type="module" src="../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">Ext</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;
            <button id="search_button" onclick="javascript: form.action='../../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../.././Init.html">Init</a></li><li><a href="../../.././Lean/Meta/CongrTheorems.html">Lean.Meta.CongrTheorems</a></li><li><a href="../../.././Std/Tactic/CoeExt.html">Std.Tactic.CoeExt</a></li><li><a href="../../.././Lean/Meta/Tactic/Simp/SimpTheorems.html">Lean.Meta.Tactic.Simp.SimpTheorems</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Std.Tactic.NormCast.Ext" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.Label"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">Label</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.instDecidableEqLabel"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">instDecidableEqLabel</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.instReprLabel"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">instReprLabel</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.instInhabitedLabel"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">instInhabitedLabel</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.getSimpArgs"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">getSimpArgs</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.countHeadCoes"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">countHeadCoes</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.countCoes"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">countCoes</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.countInternalCoes"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">countInternalCoes</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.classifyType"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">classifyType</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.pushCastExt"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">pushCastExt</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.NormCastExtension"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">NormCastExtension</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.instInhabitedNormCastExtension"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">instInhabitedNormCastExtension</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.normCastExt"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">normCastExt</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.addElim"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">addElim</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.addMove"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">addMove</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.addSquash"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">addSquash</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.addInfer"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">addInfer</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.Attr.normCastLabel"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">Attr</span>.<span class="name">normCastLabel</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.NormCast.Attr.norm_cast"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">Attr</span>.<span class="name">norm_cast</span></a></div></nav><main>
<div class="decl" id="Std.Tactic.NormCast.Label"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L21-L29">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">Label</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p><code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label">Label</a></code> is a type used to classify <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.norm_cast">norm_cast</a></code> lemmas.</p><ul>
<li>elim lemma:   LHS has 0 head coes and ≥ 1 internal coe</li>
<li>move lemma:   LHS has 1 head coe and 0 internal coes,    RHS has 0 head coes and ≥ 1 internal coes</li>
<li>squash lemma: LHS has ≥ 1 head coes and 0 internal coes, RHS has fewer head coes</li>
</ul><ul class="constructors"><li class="constructor" id="Std.Tactic.NormCast.Label.elim">elim: <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label">Std.Tactic.NormCast.Label</a><div class="inductive_ctor_doc"><p>elim lemma: LHS has 0 head coes and ≥ 1 internal coe</p></div></li><li class="constructor" id="Std.Tactic.NormCast.Label.move">move: <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label">Std.Tactic.NormCast.Label</a><div class="inductive_ctor_doc"><p>move lemma: LHS has 1 head coe and 0 internal coes,
RHS has 0 head coes and ≥ 1 internal coes</p></div></li><li class="constructor" id="Std.Tactic.NormCast.Label.squash">squash: <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label">Std.Tactic.NormCast.Label</a><div class="inductive_ctor_doc"><p>squash lemma: LHS has ≥ 1 head coes and 0 internal coes, RHS has fewer head coes</p></div></li></ul><details id="instances-for-list-Std.Tactic.NormCast.Label" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.instDecidableEqLabel"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L29-L29">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.instDecidableEqLabel"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">instDecidableEqLabel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#DecidableEq">DecidableEq</a> <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label">Std.Tactic.NormCast.Label</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.instDecidableEqLabel">Std.Tactic.NormCast.instDecidableEqLabel</a> <span class="fn">x</span> <span class="fn">y</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if h : <span class="fn"><span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.toCtorIdx">Std.Tactic.NormCast.Label.toCtorIdx</a> <span class="fn">x</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.toCtorIdx">Std.Tactic.NormCast.Label.toCtorIdx</a> <span class="fn">y</span></span></span> then <span class="fn"><a href="../../.././Init/Prelude.html#Decidable.isTrue">isTrue</a> <span class="fn">(_ : <span class="fn"><span class="fn">x</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">y</span></span>)</span></span>
  else <span class="fn"><a href="../../.././Init/Prelude.html#Decidable.isFalse">isFalse</a> <span class="fn">(_ : <span class="fn"><span class="fn"><span class="fn">x</span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">y</span></span> → <a href="../../.././Init/Prelude.html#False">False</a></span>)</span></span></span></span></li></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.instReprLabel"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L29-L29">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.instReprLabel"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">instReprLabel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label">Std.Tactic.NormCast.Label</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.instReprLabel">Std.Tactic.NormCast.instReprLabel</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">reprPrec</span> := <a href="../../.././Std/Tactic/NormCast/Ext.html#_private.Std.Tactic.NormCast.Ext.0.Std.Tactic.NormCast.reprLabel._@.Std.Tactic.NormCast.Ext._hyg.102">Std.Tactic.NormCast.reprLabel✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.instInhabitedLabel"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L29-L29">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.instInhabitedLabel"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">instInhabitedLabel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label">Std.Tactic.NormCast.Label</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.instInhabitedLabel">Std.Tactic.NormCast.instInhabitedLabel</a> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">default</span> := <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.elim">Std.Tactic.NormCast.Label.elim</a> }</span></span></li></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.getSimpArgs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L32-L40">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.getSimpArgs"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">getSimpArgs</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../../.././Init/Prelude.html#Array">Array</a> <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span></div></div><p>Assuming <code>e</code> is an application, returns the list of subterms that <code>simp</code> will rewrite in.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Std.Tactic.NormCast.getSimpArgs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.countHeadCoes"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L43-L48">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.countHeadCoes"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">countHeadCoes</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a></span></div></div><p>Count how many coercions are at the top of the expression.</p></div></div><div class="decl" id="Std.Tactic.NormCast.countCoes"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L51-L60">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.countCoes"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">countCoes</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a></span></div></div><p>Count how many coercions are inside the expression, including the top ones.</p></div></div><div class="decl" id="Std.Tactic.NormCast.countInternalCoes"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L63-L64">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.countInternalCoes"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">countInternalCoes</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a></span></div></div><p>Count how many coercions are inside the expression, excluding the top ones.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.countInternalCoes">Std.Tactic.NormCast.countInternalCoes</a> <span class="fn">e</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a> <span class="fn">do
  let __do_lift ← <span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.countCoes">Std.Tactic.NormCast.countCoes</a> <span class="fn">e</span></span>
  let __do_lift_1 ← <span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.countHeadCoes">Std.Tactic.NormCast.countHeadCoes</a> <span class="fn">e</span></span>
  <span class="fn"><a href="../../.././Init/Prelude.html#Pure.pure">pure</a> <span class="fn">(<span class="fn"><span class="fn">__do_lift</span> <a href="../../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">__do_lift_1</span></span>)</span></span></span></span></li></ul></details><details id="instances-for-list-Std.Tactic.NormCast.countInternalCoes" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.classifyType"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L67-L94">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.classifyType"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">classifyType</span></a></span><span class="decl_args">
<span class="fn">(ty : <a href="../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label">Std.Tactic.NormCast.Label</a></span></div></div><p>Classifies a declaration of type <code>ty</code> as a <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.norm_cast">norm_cast</a></code> rule.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Std.Tactic.NormCast.classifyType" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.pushCastExt"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L96-L100">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.pushCastExt"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">pushCastExt</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Lean/Meta/Tactic/Simp/SimpTheorems.html#Lean.Meta.SimpExtension">Lean.Meta.SimpExtension</a></div></div><p>The <code>push_cast</code> simp attribute.</p></div></div><div class="decl" id="Std.Tactic.NormCast.NormCastExtension"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L103-L110">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.NormCastExtension"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">NormCastExtension</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././foundational_types.html">Type</a></div></div><p>The <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.norm_cast">norm_cast</a></code> attribute stores three simp sets.</p><ul class="structure_fields" id="Std.Tactic.NormCast.NormCastExtension.mk"><li id="Std.Tactic.NormCast.NormCastExtension.up" class="structure_field"><div class="structure_field_info">up : <a href="../../.././Lean/Meta/Tactic/Simp/SimpTheorems.html#Lean.Meta.SimpExtension">Lean.Meta.SimpExtension</a></div><div class="structure_field_doc"><p>A simp set which lifts coercion arrows to the top level.</p></div></li><li id="Std.Tactic.NormCast.NormCastExtension.down" class="structure_field"><div class="structure_field_info">down : <a href="../../.././Lean/Meta/Tactic/Simp/SimpTheorems.html#Lean.Meta.SimpExtension">Lean.Meta.SimpExtension</a></div><div class="structure_field_doc"><p>A simp set which pushes coercion arrows to the leaves.</p></div></li><li id="Std.Tactic.NormCast.NormCastExtension.squash" class="structure_field"><div class="structure_field_info">squash : <a href="../../.././Lean/Meta/Tactic/Simp/SimpTheorems.html#Lean.Meta.SimpExtension">Lean.Meta.SimpExtension</a></div><div class="structure_field_doc"><p>A simp set which simplifies transitive coercions.</p></div></li></ul><details id="instances-for-list-Std.Tactic.NormCast.NormCastExtension" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.instInhabitedNormCastExtension"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L110-L110">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.instInhabitedNormCastExtension"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">instInhabitedNormCastExtension</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Init/Prelude.html#Inhabited">Inhabited</a> <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.NormCastExtension">Std.Tactic.NormCast.NormCastExtension</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.instInhabitedNormCastExtension">Std.Tactic.NormCast.instInhabitedNormCastExtension</a> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">default</span> := <span class="fn">{ <span class="fn">up</span> := <span class="fn">default</span>, <span class="fn">down</span> := <span class="fn">default</span>, <span class="fn">squash</span> := <span class="fn">default</span> }</span> }</span></span></li></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.normCastExt"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L112-L117">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.normCastExt"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">normCastExt</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.NormCastExtension">Std.Tactic.NormCast.NormCastExtension</a></div></div><p>The <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.norm_cast">norm_cast</a></code> extension data.</p></div></div><div class="decl" id="Std.Tactic.NormCast.addElim"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L120-L122">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.addElim"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">addElim</span></a></span><span class="decl_args">
<span class="fn">(decl : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(kind : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Lean/Attributes.html#Lean.AttributeKind">Lean.AttributeKind</a> <a href="../../.././Lean/Attributes.html#Lean.AttributeKind.global">Lean.AttributeKind.global</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(prio : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p><code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.addElim">addElim</a> decl</code> adds <code>decl</code> as an <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.elim">elim</a></code> lemma to the cache.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.addElim">Std.Tactic.NormCast.addElim</a> <span class="fn">decl</span> <span class="fn">kind</span> <span class="fn">prio</span></span> <a href="../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../.././Lean/Meta/Tactic/Simp/SimpTheorems.html#Lean.Meta.addSimpTheorem">Lean.Meta.addSimpTheorem</a> <span class="fn"><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.normCastExt">Std.Tactic.NormCast.normCastExt</a>.up</span> <span class="fn">decl</span> <a href="../../.././Init/Prelude.html#Bool.true">true</a> <a href="../../.././Init/Prelude.html#Bool.false">false</a> <span class="fn">kind</span> <span class="fn">prio</span></span></span></li></ul></details><details id="instances-for-list-Std.Tactic.NormCast.addElim" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.addMove"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L125-L129">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.addMove"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">addMove</span></a></span><span class="decl_args">
<span class="fn">(decl : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(kind : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Lean/Attributes.html#Lean.AttributeKind">Lean.AttributeKind</a> <a href="../../.././Lean/Attributes.html#Lean.AttributeKind.global">Lean.AttributeKind.global</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(prio : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p><code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.addMove">addMove</a> decl</code> adds <code>decl</code> as a <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.move">move</a></code> lemma to the cache.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Std.Tactic.NormCast.addMove" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.addSquash"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L132-L136">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.addSquash"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">addSquash</span></a></span><span class="decl_args">
<span class="fn">(decl : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(kind : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Lean/Attributes.html#Lean.AttributeKind">Lean.AttributeKind</a> <a href="../../.././Lean/Attributes.html#Lean.AttributeKind.global">Lean.AttributeKind.global</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(prio : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p><code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.addSquash">addSquash</a> decl</code> adds <code>decl</code> as a <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.squash">squash</a></code> lemma to the cache.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Std.Tactic.NormCast.addSquash" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.addInfer"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L144-L150">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.addInfer"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">addInfer</span></a></span><span class="decl_args">
<span class="fn">(decl : <a href="../../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(kind : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Lean/Attributes.html#Lean.AttributeKind">Lean.AttributeKind</a> <a href="../../.././Lean/Attributes.html#Lean.AttributeKind.global">Lean.AttributeKind.global</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(prio : <span class="fn"><a href="../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">1000</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../.././Init/Prelude.html#Unit">Unit</a></span></div></div><p><code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.addInfer">addInfer</a> decl</code> infers the label of <code>decl</code> and adds it to the cache.</p><ul>
<li>elim lemma:   LHS has 0 head coes and ≥ 1 internal coe</li>
<li>move lemma:   LHS has 1 head coe and 0 internal coes,    RHS has 0 head coes and ≥ 1 internal coes</li>
<li>squash lemma: LHS has ≥ 1 head coes and 0 internal coes, RHS has fewer head coes</li>
</ul><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Std.Tactic.NormCast.addInfer" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.Attr.normCastLabel"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L153-L154">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.normCastLabel"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">Attr</span>.<span class="name">normCastLabel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The possible <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.norm_cast">norm_cast</a></code> kinds: <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.elim">elim</a></code>, <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.move">move</a></code>, or <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.squash">squash</a></code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Std.Tactic.NormCast.Attr.normCastLabel" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.NormCast.Attr.norm_cast"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/NormCast/Ext.lean#L157-L205">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.norm_cast"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">NormCast</span>.<span class="name">Attr</span>.<span class="name">norm_cast</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.norm_cast">norm_cast</a></code> attribute should be given to lemmas that describe the
behaviour of a coercion in regard to an operator, a relation, or a particular
function.</p><p>It only concerns equality or iff lemmas involving <code>↑</code>, <code>⇑</code> and <code>↥</code>, describing the behavior of
the coercion functions.
It does not apply to the explicit functions that define the coercions.</p><p>Examples:</p><pre><code class="language-lean">@[norm_cast] theorem coe_nat_inj' {m n : ℕ} : (↑m : ℤ) = ↑n ↔ m = n

@[norm_cast] theorem coe_int_denom (n : ℤ) : (n : ℚ).denom = 1

@[norm_cast] theorem cast_id : ∀ n : ℚ, ↑n = n

@[norm_cast] theorem coe_nat_add (m n : ℕ) : (↑(m + n) : ℤ) = ↑m + ↑n

@[norm_cast] theorem cast_coe_nat (n : ℕ) : ((n : ℤ) : α) = n

@[norm_cast] theorem cast_one : ((1 : ℚ) : α) = 1
</code></pre><p>Lemmas tagged with <code>@[norm_cast]</code> are classified into three categories: <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.move">move</a></code>, <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.elim">elim</a></code>, and
<code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.squash">squash</a></code>. They are classified roughly as follows:</p><ul>
<li>elim lemma:   LHS has 0 head coes and ≥ 1 internal coe</li>
<li>move lemma:   LHS has 1 head coe and 0 internal coes,    RHS has 0 head coes and ≥ 1 internal coes</li>
<li>squash lemma: LHS has ≥ 1 head coes and 0 internal coes, RHS has fewer head coes</li>
</ul><p><code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.norm_cast">norm_cast</a></code> uses <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.move">move</a></code> and <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.elim">elim</a></code> lemmas to factor coercions toward the root of an expression
and to cancel them from both sides of an equation or relation. It uses <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.squash">squash</a></code> lemmas to clean
up the result.</p><p>Occasionally you may want to override the automatic classification.
You can do this by giving an optional <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.elim">elim</a></code>, <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.move">move</a></code>, or <code><a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Label.squash">squash</a></code> parameter to the attribute.</p><pre><code class="language-lean">@[simp, <a href="../../.././Std/Tactic/NormCast/Ext.html#Std.Tactic.NormCast.Attr.norm_cast">norm_cast</a> elim] lemma nat_cast_re (n : ℕ) : (n : ℂ).re = n := by
  rw [← of_real_nat_cast, of_real_re]
</code></pre><p>Don't do this unless you understand what you are doing.</p><p>A full description of the tactic, and the use of each lemma category, can be found at
<https://lean-forward.github.io/norm_cast/norm_cast.pdf>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Std.Tactic.NormCast.Attr.norm_cast" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>