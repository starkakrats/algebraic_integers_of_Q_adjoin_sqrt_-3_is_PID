<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="stylesheet" href="../.././src/pygments.css"></link><link rel="shortcut icon" href="../.././favicon.ico"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.NumberTheory.DiophantineApproximation</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Mathlib.NumberTheory.DiophantineApproximation";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">NumberTheory</span>.<span class="name">DiophantineApproximation</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;
            <button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Mathlib/Tactic/Basic.html">Mathlib.Tactic.Basic</a></li><li><a href="../.././Mathlib/Data/Int/Units.html">Mathlib.Data.Int.Units</a></li><li><a href="../.././Mathlib/Data/Real/Irrational.html">Mathlib.Data.Real.Irrational</a></li><li><a href="../.././Mathlib/RingTheory/Coprime/Lemmas.html">Mathlib.RingTheory.Coprime.Lemmas</a></li><li><a href="../.././Mathlib/Algebra/ContinuedFractions/Computation/ApproximationCorollaries.html">Mathlib.Algebra.ContinuedFractions.Computation.ApproximationCorollaries</a></li><li><a href="../.././Mathlib/Algebra/ContinuedFractions/Computation/Translations.html">Mathlib.Algebra.ContinuedFractions.Computation.Translations</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.NumberTheory.DiophantineApproximation" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Real.exists_int_int_abs_mul_sub_le"><span class="name">Real</span>.<span class="name">exists_int_int_abs_mul_sub_le</span></a></div><div class="nav_link"><a class="break_within" href="#Real.exists_nat_abs_mul_sub_round_le"><span class="name">Real</span>.<span class="name">exists_nat_abs_mul_sub_round_le</span></a></div><div class="nav_link"><a class="break_within" href="#Real.exists_rat_abs_sub_le_and_den_le"><span class="name">Real</span>.<span class="name">exists_rat_abs_sub_le_and_den_le</span></a></div><div class="nav_link"><a class="break_within" href="#Real.exists_rat_abs_sub_lt_and_lt_of_irrational"><span class="name">Real</span>.<span class="name">exists_rat_abs_sub_lt_and_lt_of_irrational</span></a></div><div class="nav_link"><a class="break_within" href="#Real.infinite_rat_abs_sub_lt_one_div_den_sq_of_irrational"><span class="name">Real</span>.<span class="name">infinite_rat_abs_sub_lt_one_div_den_sq_of_irrational</span></a></div><div class="nav_link"><a class="break_within" href="#Rat.den_le_and_le_num_le_of_sub_lt_one_div_den_sq"><span class="name">Rat</span>.<span class="name">den_le_and_le_num_le_of_sub_lt_one_div_den_sq</span></a></div><div class="nav_link"><a class="break_within" href="#Rat.finite_rat_abs_sub_lt_one_div_den_sq"><span class="name">Rat</span>.<span class="name">finite_rat_abs_sub_lt_one_div_den_sq</span></a></div><div class="nav_link"><a class="break_within" href="#Real.infinite_rat_abs_sub_lt_one_div_den_sq_iff_irrational"><span class="name">Real</span>.<span class="name">infinite_rat_abs_sub_lt_one_div_den_sq_iff_irrational</span></a></div><div class="nav_link"><a class="break_within" href="#Real.convergent"><span class="name">Real</span>.<span class="name">convergent</span></a></div><div class="nav_link"><a class="break_within" href="#Real.convergent_zero"><span class="name">Real</span>.<span class="name">convergent_zero</span></a></div><div class="nav_link"><a class="break_within" href="#Real.convergent_succ"><span class="name">Real</span>.<span class="name">convergent_succ</span></a></div><div class="nav_link"><a class="break_within" href="#Real.convergent_of_zero"><span class="name">Real</span>.<span class="name">convergent_of_zero</span></a></div><div class="nav_link"><a class="break_within" href="#Real.convergent_of_int"><span class="name">Real</span>.<span class="name">convergent_of_int</span></a></div><div class="nav_link"><a class="break_within" href="#Real.continued_fraction_convergent_eq_convergent"><span class="name">Real</span>.<span class="name">continued_fraction_convergent_eq_convergent</span></a></div><div class="nav_link"><a class="break_within" href="#Real.ContfracLegendre.Ass"><span class="name">Real</span>.<span class="name">ContfracLegendre</span>.<span class="name">Ass</span></a></div><div class="nav_link"><a class="break_within" href="#Real.exists_rat_eq_convergent'"><span class="name">Real</span>.<span class="name">exists_rat_eq_convergent'</span></a></div><div class="nav_link"><a class="break_within" href="#Real.exists_rat_eq_convergent"><span class="name">Real</span>.<span class="name">exists_rat_eq_convergent</span></a></div><div class="nav_link"><a class="break_within" href="#Real.exists_continued_fraction_convergent_eq_rat"><span class="name">Real</span>.<span class="name">exists_continued_fraction_convergent_eq_rat</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="Diophantine-Approximation">Diophantine Approximation <a class="hover-link" href="#Diophantine-Approximation">#</a></h1><p>The first part of this file gives proofs of various versions of
<strong>Dirichlet's approximation theorem</strong> and its important consequence that when $\xi$ is an
irrational real number, then there are infinitely many rationals $x/y$ (in lowest terms)
such that
$$\left|\xi - \frac{x}{y}\right| < \frac{1}{y^2} ,.$$
The proof is based on the pigeonhole principle.</p><p>The second part of the file gives a proof of <strong>Legendre's Theorem</strong> on rational approximation,
which states that if $\xi$ is a real number and $x/y$ is a rational number such that
$$\left|\xi - \frac{x}{y}\right| < \frac{1}{2y^2} ,,$$
then $x/y$ must be a convergent of the continued fraction expansion of $\xi$.</p><h2 class="markdown-heading" id="Main-statements">Main statements <a class="hover-link" href="#Main-statements">#</a></h2><p>The main results are three variants of Dirichlet's approximation theorem:</p><ul>
<li><code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_int_int_abs_mul_sub_le">Real.exists_int_int_abs_mul_sub_le</a></code>, which states that for all real <code>ξ</code> and natural <code>0 &lt; n</code>,
there are integers <code>j</code> and <code>k</code> with <code>0 &lt; k ≤ n</code> and <code>|k*ξ - j| ≤ 1/(n+1)</code>,</li>
<li><code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_nat_abs_mul_sub_round_le">Real.exists_nat_abs_mul_sub_round_le</a></code>, which replaces <code>j</code> by <code>round(k*ξ)</code> and uses
a natural number <code>k</code>,</li>
<li><code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_rat_abs_sub_le_and_den_le">Real.exists_rat_abs_sub_le_and_den_le</a></code>, which says that there is a rational number <code>q</code>
satisfying <code>|ξ - q| ≤ 1/((n+1)*q.den)</code> and <code>q.den ≤ n</code>,</li>
</ul><p>and</p><ul>
<li><code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.infinite_rat_abs_sub_lt_one_div_den_sq_of_irrational">Real.infinite_rat_abs_sub_lt_one_div_den_sq_of_irrational</a></code>, which states that
for irrational <code>ξ</code>, the set <code>{q : ℚ | |ξ - q| &lt; 1/q.den^2}</code> is infinite.</li>
</ul><p>We also show a converse,</p><ul>
<li><code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Rat.finite_rat_abs_sub_lt_one_div_den_sq">Rat.finite_rat_abs_sub_lt_one_div_den_sq</a></code>, which states that the set above is finite
when <code>ξ</code> is a rational number.</li>
</ul><p>Both statements are combined to give an equivalence,
<code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.infinite_rat_abs_sub_lt_one_div_den_sq_iff_irrational">Real.infinite_rat_abs_sub_lt_one_div_den_sq_iff_irrational</a></code>.</p><p>There are two versions of Legendre's Theorem. One, <code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_rat_eq_convergent">Real.exists_rat_eq_convergent</a></code>, uses
<code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a></code>, a simple recursive definition of the convergents that is also defined
in this file, whereas the other, <code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_continued_fraction_convergent_eq_rat">Real.exists_continued_fraction_convergent_eq_rat</a></code>, uses
<code><a href="../.././Mathlib/Algebra/ContinuedFractions/Basic.html#GeneralizedContinuedFraction.convergents">GeneralizedContinuedFraction.convergents</a></code> of <code><a href="../.././Mathlib/Algebra/ContinuedFractions/Computation/Basic.html#GeneralizedContinuedFraction.of">GeneralizedContinuedFraction.of</a> ξ</code>.</p><h2 class="markdown-heading" id="Implementation-notes">Implementation notes <a class="hover-link" href="#Implementation-notes">#</a></h2><p>We use the namespace <code><a href="../.././Mathlib/Data/Real/Basic.html#Real">Real</a></code> for the results on real numbers and <code><a href="../.././Std/Data/Rat/Basic.html#Rat">Rat</a></code> for the results
on rational numbers. We introduce a secondary namespace <code>real.contfrac_legendre</code>
to separate off a definition and some technical auxiliary lemmas used in the proof
of Legendre's Theorem. For remarks on the proof of Legendre's Theorem, see below.</p><h2 class="markdown-heading" id="References">References <a class="hover-link" href="#References">#</a></h2><p><https://en.wikipedia.org/wiki/Dirichlet%27s_approximation_theorem>
<https://de.wikipedia.org/wiki/Kettenbruch> (The German Wikipedia page on continued
fractions is much more extensive than the English one.)</p><h2 class="markdown-heading" id="Tags">Tags <a class="hover-link" href="#Tags">#</a></h2><p>Diophantine approximation, Dirichlet's approximation theorem, continued fraction</p></div><div class="mod_doc"><h3 class="markdown-heading" id="Dirichlet-s-approximation-theorem">Dirichlet's approximation theorem <a class="hover-link" href="#Dirichlet-s-approximation-theorem">#</a></h3><p>We show that for any real number <code>ξ</code> and positive natural <code>n</code>, there is a fraction <code>q</code>
such that <code>q.den ≤ n</code> and <code>|ξ - q| ≤ 1/((n+1)*q.den)</code>.</p></div><div class="decl" id="Real.exists_int_int_abs_mul_sub_le"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L94-L133">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_int_int_abs_mul_sub_le"><span class="name">Real</span>.<span class="name">exists_int_int_abs_mul_sub_le</span></a></span><span class="decl_args">
<span class="fn">(ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">{n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(n_pos : <span class="fn"><span class="fn">0</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn">n</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (j : <a href="../.././Init/Data/Int/Basic.html#Int">ℤ</a>) (k : <a href="../.././Init/Data/Int/Basic.html#Int">ℤ</a>), <span class="fn"><span class="fn"><span class="fn">0</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn">k</span></span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn"><span class="fn">k</span> <a href="../.././Init/Prelude.html#LE.le">≤</a> <span class="fn">↑<span class="fn">n</span></span></span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">|<span class="fn"><span class="fn"><span class="fn">↑<span class="fn">k</span></span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn">ξ</span></span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">j</span></span></span>|</span> <a href="../.././Init/Prelude.html#LE.le">≤</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">(<span class="fn"><span class="fn">↑<span class="fn">n</span></span> <a href="../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">1</span></span>)</span></span></span></span></span></span></div></div><p><em>Dirichlet's approximation theorem:</em>
For any real number <code>ξ</code> and positive natural <code>n</code>, there are integers <code>j</code> and <code>k</code>,
with <code>0 &lt; k ≤ n</code> and <code>|k*ξ - j| ≤ 1/(n+1)</code>.</p><p>See also <code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_nat_abs_mul_sub_round_le">Real.exists_nat_abs_mul_sub_round_le</a></code>.</p></div></div><div class="decl" id="Real.exists_nat_abs_mul_sub_round_le"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L140-L145">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_nat_abs_mul_sub_round_le"><span class="name">Real</span>.<span class="name">exists_nat_abs_mul_sub_round_le</span></a></span><span class="decl_args">
<span class="fn">(ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">{n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(n_pos : <span class="fn"><span class="fn">0</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn">n</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (k : <a href="../.././Init/Prelude.html#Nat">ℕ</a>), <span class="fn"><span class="fn"><span class="fn">0</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn">k</span></span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn"><span class="fn">k</span> <a href="../.././Init/Prelude.html#LE.le">≤</a> <span class="fn">n</span></span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">|<span class="fn"><span class="fn"><span class="fn">↑<span class="fn">k</span></span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn">ξ</span></span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">(<span class="fn"><a href="../.././Mathlib/Algebra/Order/Floor.html#round">round</a> <span class="fn">(<span class="fn"><span class="fn">↑<span class="fn">k</span></span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn">ξ</span></span>)</span></span>)</span></span></span>|</span> <a href="../.././Init/Prelude.html#LE.le">≤</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">(<span class="fn"><span class="fn">↑<span class="fn">n</span></span> <a href="../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">1</span></span>)</span></span></span></span></span></span></div></div><p><em>Dirichlet's approximation theorem:</em>
For any real number <code>ξ</code> and positive natural <code>n</code>, there is a natural number <code>k</code>,
with <code>0 &lt; k ≤ n</code> such that <code>|k*ξ - round(k*ξ)| ≤ 1/(n+1)</code>.</p></div></div><div class="decl" id="Real.exists_rat_abs_sub_le_and_den_le"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L153-L164">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_rat_abs_sub_le_and_den_le"><span class="name">Real</span>.<span class="name">exists_rat_abs_sub_le_and_den_le</span></a></span><span class="decl_args">
<span class="fn">(ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>)</span></span>
<span class="impl_arg"><span class="decl_args">
<span class="fn">{n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(n_pos : <span class="fn"><span class="fn">0</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn">n</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (q : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a>), <span class="fn"><span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">q</span></span></span>|</span> <a href="../.././Init/Prelude.html#LE.le">≤</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">(<span class="fn"><span class="fn">(<span class="fn"><span class="fn">↑<span class="fn">n</span></span> <a href="../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">1</span></span>)</span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn">↑<span class="fn"><span class="fn">q</span>.den</span></span></span>)</span></span></span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn"><span class="fn">q</span>.den</span> <a href="../.././Init/Prelude.html#LE.le">≤</a> <span class="fn">n</span></span></span></span></div></div><p><em>Dirichlet's approximation theorem:</em>
For any real number <code>ξ</code> and positive natural <code>n</code>, there is a fraction <code>q</code>
such that <code>q.den ≤ n</code> and <code>|ξ - q| ≤ 1/((n+1)*q.den)</code>.</p><p>See also <code>AddCircle.exists_norm_nsmul_le</code>.</p></div></div><div class="mod_doc"><h3 class="markdown-heading" id="Infinitely-many-good-approximations-to-irrational-numbers">Infinitely many good approximations to irrational numbers <a class="hover-link" href="#Infinitely-many-good-approximations-to-irrational-numbers">#</a></h3><p>We show that an irrational real number <code>ξ</code> has infinitely many "good rational approximations",
i.e., fractions <code>x/y</code> in lowest terms such that <code>|ξ - x/y| &lt; 1/y^2</code>.</p></div><div class="decl" id="Real.exists_rat_abs_sub_lt_and_lt_of_irrational"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L183-L200">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_rat_abs_sub_lt_and_lt_of_irrational"><span class="name">Real</span>.<span class="name">exists_rat_abs_sub_lt_and_lt_of_irrational</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(hξ : <span class="fn"><a href="../.././Mathlib/Data/Real/Irrational.html#Irrational">Irrational</a> <span class="fn">ξ</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(q : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (q' : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a>), <span class="fn"><span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">q'</span></span></span>|</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn"><span class="fn">↑<span class="fn"><span class="fn">q'</span>.den</span></span> <a href="../.././Init/Prelude.html#HPow.hPow">^</a> <span class="fn">2</span></span></span></span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">q'</span></span></span>|</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">q</span></span></span>|</span></span></span></span></div></div><p>Given any rational approximation <code>q</code> to the irrational real number <code>ξ</code>, there is
a good rational approximation <code>q'</code> such that <code>|ξ - q'| &lt; |ξ - q|</code>.</p></div></div><div class="decl" id="Real.infinite_rat_abs_sub_lt_one_div_den_sq_of_irrational"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L205-L212">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.infinite_rat_abs_sub_lt_one_div_den_sq_of_irrational"><span class="name">Real</span>.<span class="name">infinite_rat_abs_sub_lt_one_div_den_sq_of_irrational</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(hξ : <span class="fn"><a href="../.././Mathlib/Data/Real/Irrational.html#Irrational">Irrational</a> <span class="fn">ξ</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Data/Set/Finite.html#Set.Infinite">Set.Infinite</a> <span class="fn">{<span class="fn">q</span> : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a> | <span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">q</span></span></span>|</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn"><span class="fn">↑<span class="fn"><span class="fn">q</span>.den</span></span> <a href="../.././Init/Prelude.html#HPow.hPow">^</a> <span class="fn">2</span></span></span></span>}</span></span></div></div><p>If <code>ξ</code> is an irrational real number, then there are infinitely many good
rational approximations to <code>ξ</code>.</p></div></div><div class="mod_doc"><h3 class="markdown-heading" id="Finitely-many-good-approximations-to-rational-numbers">Finitely many good approximations to rational numbers <a class="hover-link" href="#Finitely-many-good-approximations-to-rational-numbers">#</a></h3><p>We now show that a rational number <code>ξ</code> has only finitely many good rational
approximations.</p></div><div class="decl" id="Rat.den_le_and_le_num_le_of_sub_lt_one_div_den_sq"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L233-L259">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Rat.den_le_and_le_num_le_of_sub_lt_one_div_den_sq"><span class="name">Rat</span>.<span class="name">den_le_and_le_num_le_of_sub_lt_one_div_den_sq</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{ξ : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{q : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(h : <span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">q</span></span>|</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn"><span class="fn">↑<span class="fn"><span class="fn">q</span>.den</span></span> <a href="../.././Init/Prelude.html#HPow.hPow">^</a> <span class="fn">2</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><span class="fn"><span class="fn">q</span>.den</span> <a href="../.././Init/Prelude.html#LE.le">≤</a> <span class="fn"><span class="fn">ξ</span>.den</span></span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn"><span class="fn"><span class="fn"><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.ceil">⌈</a><span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn">↑<span class="fn"><span class="fn">q</span>.den</span></span></span><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.ceil">⌉</a></span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">1</span></span> <a href="../.././Init/Prelude.html#LE.le">≤</a> <span class="fn"><span class="fn">q</span>.num</span></span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn"><span class="fn">q</span>.num</span> <a href="../.././Init/Prelude.html#LE.le">≤</a> <span class="fn"><span class="fn"><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌊</a><span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn">↑<span class="fn"><span class="fn">q</span>.den</span></span></span><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌋</a></span> <a href="../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">1</span></span></span></span></span></div></div><p>If <code>ξ</code> is rational, then the good rational approximations to <code>ξ</code> have bounded
numerator and denominator.</p></div></div><div class="decl" id="Rat.finite_rat_abs_sub_lt_one_div_den_sq"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L263-L281">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Rat.finite_rat_abs_sub_lt_one_div_den_sq"><span class="name">Rat</span>.<span class="name">finite_rat_abs_sub_lt_one_div_den_sq</span></a></span><span class="decl_args">
<span class="fn">(ξ : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Data/Set/Finite.html#Set.Finite">Set.Finite</a> <span class="fn">{<span class="fn">q</span> : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a> | <span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">q</span></span>|</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn"><span class="fn">↑<span class="fn"><span class="fn">q</span>.den</span></span> <a href="../.././Init/Prelude.html#HPow.hPow">^</a> <span class="fn">2</span></span></span></span>}</span></span></div></div><p>A rational number has only finitely many good rational approximations.</p></div></div><div class="decl" id="Real.infinite_rat_abs_sub_lt_one_div_den_sq_iff_irrational"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L288-L295">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.infinite_rat_abs_sub_lt_one_div_den_sq_iff_irrational"><span class="name">Real</span>.<span class="name">infinite_rat_abs_sub_lt_one_div_den_sq_iff_irrational</span></a></span><span class="decl_args">
<span class="fn">(ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/Data/Set/Finite.html#Set.Infinite">Set.Infinite</a> <span class="fn">{<span class="fn">q</span> : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a> | <span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">q</span></span></span>|</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn"><span class="fn">↑<span class="fn"><span class="fn">q</span>.den</span></span> <a href="../.././Init/Prelude.html#HPow.hPow">^</a> <span class="fn">2</span></span></span></span>}</span></span> <a href="../.././Init/Core.html#Iff">↔</a> <span class="fn"><a href="../.././Mathlib/Data/Real/Irrational.html#Irrational">Irrational</a> <span class="fn">ξ</span></span></span></div></div><p>The set of good rational approximations to a real number <code>ξ</code> is infinite if and only if
<code>ξ</code> is irrational.</p></div></div><div class="mod_doc"><h3 class="markdown-heading" id="Legendre-s-Theorem-on-Rational-Approximation">Legendre's Theorem on Rational Approximation <a class="hover-link" href="#Legendre-s-Theorem-on-Rational-Approximation">#</a></h3><p>We prove <strong>Legendre's Theorem</strong> on rational approximation: If $\xi$ is a real number and
$x/y$ is a rational number such that $|\xi - x/y| < 1/(2y^2)$,
then $x/y$ is a convergent of the continued fraction expansion of $\xi$.</p><p>The proof is by induction. However, the induction proof does not work with the
statement as given, since the assumption is too weak to imply the corresponding
statement for the application of the induction hypothesis. This can be remedied
by making the statement slightly stronger. Namely, we assume that $|\xi - x/y| < 1/(y(2y-1))$
when $y \ge 2$ and $-\frac{1}{2} < \xi - x < 1$ when $y = 1$.</p></div><div class="mod_doc"><h3 class="markdown-heading" id="Convergents-definition-and-API-lemmas">Convergents: definition and API lemmas <a class="hover-link" href="#Convergents-definition-and-API-lemmas">#</a></h3></div><div class="decl" id="Real.convergent"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L335-L337">source</a></div><div class="decl_header"><span class="decl_kind">noncomputable def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent"><span class="name">Real</span>.<span class="name">convergent</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a> → <span class="fn"><a href="../.././Init/Prelude.html#Nat">ℕ</a> → <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a></span></span></div></div><p>We give a direct recursive definition of the convergents of the continued fraction
expansion of a real number <code>ξ</code>. The main reason for that is that we want to have the
convergents as rational numbers; the versions
<code>(GeneralizedContinuedFraction.of ξ).convergents</code> and
<code>(GeneralizedContinuedFraction.of ξ).convergents'</code> always give something of the
same type as <code>ξ</code>. We can then also use dot notation <code>ξ.<a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">convergent</a> n</code>.
Another minor reason is that this demonstrates that the proof
of Legendre's theorem does not need anything beyond this definition.
We provide a proof that this definition agrees with the other one;
see <code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.continued_fraction_convergent_eq_convergent">Real.continued_fraction_convergent_eq_convergent</a></code>.
(Note that we use the fact that <code>1/0 = 0</code> here to make it work for rational <code>ξ</code>.)</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn">x</span> <span class="fn">0</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">↑<span class="fn"><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌊</a><span class="fn">x</span><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌋</a></span></span></span></li><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn">x</span> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Nat.succ">Nat.succ</a> <span class="fn">n</span></span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">↑<span class="fn"><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌊</a><span class="fn">x</span><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌋</a></span></span> <a href="../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn"><span class="fn">(<span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn"><span class="fn">(<span class="fn"><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.fract">Int.fract</a> <span class="fn">x</span></span>)</span><a href="../.././Mathlib/Algebra/Group/Defs.html#Inv.inv">⁻¹</a></span> <span class="fn">n</span></span>)</span><a href="../.././Mathlib/Algebra/Group/Defs.html#Inv.inv">⁻¹</a></span></span></span></li></ul></details><details id="instances-for-list-Real.convergent" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Real.convergent_zero"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L342-L343">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent_zero"><span class="name">Real</span>.<span class="name">convergent_zero</span></a></span><span class="decl_args">
<span class="fn">(ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn">ξ</span> <span class="fn">0</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">↑<span class="fn"><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌊</a><span class="fn">ξ</span><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌋</a></span></span></span></div></div><p>The zeroth convergent of <code>ξ</code> is <code>⌊ξ⌋</code>.</p></div></div><div class="decl" id="Real.convergent_succ"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L348-L352">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent_succ"><span class="name">Real</span>.<span class="name">convergent_succ</span></a></span><span class="decl_args">
<span class="fn">(ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>)</span></span>
<span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn">ξ</span> <span class="fn">(<span class="fn"><span class="fn">n</span> <a href="../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn">1</span></span>)</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><span class="fn">↑<span class="fn"><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌊</a><span class="fn">ξ</span><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.floor">⌋</a></span></span> <a href="../.././Init/Prelude.html#HAdd.hAdd">+</a> <span class="fn"><span class="fn">(<span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn"><span class="fn">(<span class="fn"><a href="../.././Mathlib/Algebra/Order/Floor.html#Int.fract">Int.fract</a> <span class="fn">ξ</span></span>)</span><a href="../.././Mathlib/Algebra/Group/Defs.html#Inv.inv">⁻¹</a></span> <span class="fn">n</span></span>)</span><a href="../.././Mathlib/Algebra/Group/Defs.html#Inv.inv">⁻¹</a></span></span></span></div></div><p>The <code>(n+1)</code>th convergent of <code>ξ</code> is the <code>n</code>th convergent of <code>1/(fract ξ)</code>.</p></div></div><div class="decl" id="Real.convergent_of_zero"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L357-L360">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent_of_zero"><span class="name">Real</span>.<span class="name">convergent_of_zero</span></a></span><span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn">0</span> <span class="fn">n</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">0</span></span></div></div><p>All convergents of <code>0</code> are zero.</p></div></div><div class="decl" id="Real.convergent_of_int"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L365-L369">source</a></div><div class="attributes">@[simp]</div>
<div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent_of_int"><span class="name">Real</span>.<span class="name">convergent_of_int</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{ξ : <a href="../.././Init/Data/Int/Basic.html#Int">ℤ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn">(<span class="fn">↑<span class="fn">ξ</span></span>)</span> <span class="fn">n</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">↑<span class="fn">ξ</span></span></span></div></div><p>If <code>ξ</code> is an integer, all its convergents equal <code>ξ</code>.</p></div></div><div class="mod_doc"><p>Our <code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">convergent</a></code>s agree with <code><a href="../.././Mathlib/Algebra/ContinuedFractions/Basic.html#GeneralizedContinuedFraction.convergents">GeneralizedContinuedFraction.convergents</a></code>.</p></div><div class="decl" id="Real.continued_fraction_convergent_eq_convergent"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L381-L387">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.continued_fraction_convergent_eq_convergent"><span class="name">Real</span>.<span class="name">continued_fraction_convergent_eq_convergent</span></a></span><span class="decl_args">
<span class="fn">(ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>)</span></span>
<span class="decl_args">
<span class="fn">(n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../.././Mathlib/Algebra/ContinuedFractions/Basic.html#GeneralizedContinuedFraction.convergents">GeneralizedContinuedFraction.convergents</a> <span class="fn">(<span class="fn"><a href="../.././Mathlib/Algebra/ContinuedFractions/Computation/Basic.html#GeneralizedContinuedFraction.of">GeneralizedContinuedFraction.of</a> <span class="fn">ξ</span></span>)</span> <span class="fn">n</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">↑<span class="fn">(<span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn">ξ</span> <span class="fn">n</span></span>)</span></span></span></div></div><p>The <code>n</code>th convergent of the <code><a href="../.././Mathlib/Algebra/ContinuedFractions/Computation/Basic.html#GeneralizedContinuedFraction.of">GeneralizedContinuedFraction.of</a> ξ</code>
agrees with <code>ξ.<a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">convergent</a> n</code>.</p></div></div><div class="mod_doc"><h3 class="markdown-heading" id="The-key-technical-condition-for-the-induction-proof">The key technical condition for the induction proof <a class="hover-link" href="#The-key-technical-condition-for-the-induction-proof">#</a></h3></div><div class="decl" id="Real.ContfracLegendre.Ass"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L405-L407">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.ContfracLegendre.Ass"><span class="name">Real</span>.<span class="name">ContfracLegendre</span>.<span class="name">Ass</span></a></span><span class="decl_args">
<span class="fn">(ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>)</span></span>
<span class="decl_args">
<span class="fn">(u : <a href="../.././Init/Data/Int/Basic.html#Int">ℤ</a>)</span></span>
<span class="decl_args">
<span class="fn">(v : <a href="../.././Init/Data/Int/Basic.html#Int">ℤ</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Prop</a></div></div><p>Define the technical condition to be used as assumption in the inductive proof.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.ContfracLegendre.Ass">Real.ContfracLegendre.Ass</a> <span class="fn">ξ</span> <span class="fn">u</span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">(<span class="fn"><span class="fn"><a href="../.././Mathlib/RingTheory/Coprime/Basic.html#IsCoprime">IsCoprime</a> <span class="fn">u</span> <span class="fn">v</span></span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">(<span class="fn"><span class="fn"><span class="fn">v</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">1</span></span> → <span class="fn"><span class="fn"><a href="../.././Init/Prelude.html#Neg.neg">-</a><span class="fn">(<span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">2</span></span>)</span></span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">u</span></span></span></span></span>)</span> <a href="../.././Init/Prelude.html#And">∧</a> <span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn"><span class="fn">↑<span class="fn">u</span></span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">↑<span class="fn">v</span></span></span></span>|</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><span class="fn">(<span class="fn"><span class="fn">↑<span class="fn">v</span></span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn">(<span class="fn"><span class="fn"><span class="fn">2</span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn">↑<span class="fn">v</span></span></span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">1</span></span>)</span></span>)</span><a href="../.././Mathlib/Algebra/Group/Defs.html#Inv.inv">⁻¹</a></span></span></span></span>)</span></span></li></ul></details><details id="instances-for-list-Real.ContfracLegendre.Ass" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="mod_doc"><h3 class="markdown-heading" id="The-main-result">The main result <a class="hover-link" href="#The-main-result">#</a></h3></div><div class="decl" id="Real.exists_rat_eq_convergent'"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L534-L577">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_rat_eq_convergent'"><span class="name">Real</span>.<span class="name">exists_rat_eq_convergent'</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{u : <a href="../.././Init/Data/Int/Basic.html#Int">ℤ</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{v : <a href="../.././Init/Prelude.html#Nat">ℕ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(h' : <span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.ContfracLegendre.Ass">Real.ContfracLegendre.Ass</a> <span class="fn">ξ</span> <span class="fn">u</span> <span class="fn">↑<span class="fn">v</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>), <span class="fn"><span class="fn"><span class="fn">↑<span class="fn">u</span></span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">↑<span class="fn">v</span></span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn">ξ</span> <span class="fn">n</span></span></span></span></div></div><p>The technical version of <em>Legendre's Theorem</em>.</p></div></div><div class="decl" id="Real.exists_rat_eq_convergent"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L584-L595">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_rat_eq_convergent"><span class="name">Real</span>.<span class="name">exists_rat_eq_convergent</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{q : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(h : <span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">q</span></span></span>|</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">(<span class="fn"><span class="fn">2</span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn"><span class="fn">↑<span class="fn"><span class="fn">q</span>.den</span></span> <a href="../.././Init/Prelude.html#HPow.hPow">^</a> <span class="fn">2</span></span></span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>), <span class="fn"><span class="fn">q</span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a> <span class="fn">ξ</span> <span class="fn">n</span></span></span></span></div></div><p>The main result, <em>Legendre's Theorem</em> on rational approximation:
if <code>ξ</code> is a real number and <code>q</code> is a rational number such that <code>|ξ - q| &lt; 1/(2*q.den^2)</code>,
then <code>q</code> is a convergent of the continued fraction expansion of <code>ξ</code>.
This version uses <code><a href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.convergent">Real.convergent</a></code>.</p></div></div><div class="decl" id="Real.exists_continued_fraction_convergent_eq_rat"><div class="theorem"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/NumberTheory/DiophantineApproximation.lean#L602-L606">source</a></div><div class="decl_header"><span class="decl_kind">theorem</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/NumberTheory/DiophantineApproximation.html#Real.exists_continued_fraction_convergent_eq_rat"><span class="name">Real</span>.<span class="name">exists_continued_fraction_convergent_eq_rat</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{ξ : <a href="../.././Mathlib/Data/Real/Basic.html#Real">ℝ</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{q : <a href="../.././Std/Data/Rat/Basic.html#Rat">ℚ</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(h : <span class="fn"><span class="fn">|<span class="fn"><span class="fn">ξ</span> <a href="../.././Init/Prelude.html#HSub.hSub">-</a> <span class="fn">↑<span class="fn">q</span></span></span>|</span> <a href="../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><span class="fn">1</span> <a href="../.././Init/Prelude.html#HDiv.hDiv">/</a> <span class="fn">(<span class="fn"><span class="fn">2</span> <a href="../.././Init/Prelude.html#HMul.hMul">*</a> <span class="fn"><span class="fn">↑<span class="fn"><span class="fn">q</span>.den</span></span> <a href="../.././Init/Prelude.html#HPow.hPow">^</a> <span class="fn">2</span></span></span>)</span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn">∃ (n : <a href="../.././Init/Prelude.html#Nat">ℕ</a>), <span class="fn"><span class="fn"><a href="../.././Mathlib/Algebra/ContinuedFractions/Basic.html#GeneralizedContinuedFraction.convergents">GeneralizedContinuedFraction.convergents</a> <span class="fn">(<span class="fn"><a href="../.././Mathlib/Algebra/ContinuedFractions/Computation/Basic.html#GeneralizedContinuedFraction.of">GeneralizedContinuedFraction.of</a> <span class="fn">ξ</span></span>)</span> <span class="fn">n</span></span> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn">↑<span class="fn">q</span></span></span></span></div></div><p>The main result, <em>Legendre's Theorem</em> on rational approximation:
if <code>ξ</code> is a real number and <code>q</code> is a rational number such that <code>|ξ - q| &lt; 1/(2*q.den^2)</code>,
then <code>q</code> is a convergent of the continued fraction expansion of <code>ξ</code>.
This is the version using <code>generalized_contined_fraction.convergents</code>.</p></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>