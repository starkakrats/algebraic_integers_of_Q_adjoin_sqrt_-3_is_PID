<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="stylesheet" href="../.././src/pygments.css"></link><link rel="shortcut icon" href="../.././favicon.ico"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Std.Tactic.PrintDependents</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Std.Tactic.PrintDependents";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">PrintDependents</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;
            <button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/PrintDependents.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Lean/Elab/Command.html">Lean.Elab.Command</a></li><li><a href="../.././Lean/Util/FoldConsts.html">Lean.Util.FoldConsts</a></li><li><a href="../.././Std/Lean/Delaborator.html">Std.Lean.Delaborator</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Std.Tactic.PrintDependents" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.CollectDependents.State"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">CollectDependents</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.CollectDependents.M"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">CollectDependents</span>.<span class="name">M</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.CollectDependents.mkState"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">CollectDependents</span>.<span class="name">mkState</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.CollectDependents.collect"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">CollectDependents</span>.<span class="name">collect</span></a></div><div class="nav_link"><a class="break_within" href="#Std.Tactic.«command#printDependents___»"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">«command#printDependents___»</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="print-dependents-command"><code>#print dependents</code> command <a class="hover-link" href="#print-dependents-command">#</a></h1><p>This is a variation on <code>#print axioms</code> where one instead specifies the axioms to avoid,
and it prints a list of all the theorems in the file that depend on that axiom, and the list
of all theorems directly referenced that are "to blame" for this dependency. Useful for debugging
unexpected dependencies.</p></div><div class="decl" id="Std.Tactic.CollectDependents.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/PrintDependents.lean#L24-L28">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.State"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">CollectDependents</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Collects the result of a <code>CollectDependents</code> query.</p><ul class="structure_fields" id="Std.Tactic.CollectDependents.State.mk"><li id="Std.Tactic.CollectDependents.State.otherAxiom" class="structure_field"><div class="structure_field_info">otherAxiom : <a href="../.././Init/Prelude.html#Bool">Bool</a></div><div class="structure_field_doc"><p>If true, an axiom not in the initial list will be considered as marked.</p></div></li><li id="Std.Tactic.CollectDependents.State.result" class="structure_field"><div class="structure_field_info">result : <span class="fn"><a href="../.././Lean/Data/NameMap.html#Lean.NameMap">Lean.NameMap</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div><div class="structure_field_doc"><p>The cached results on visited constants.</p></div></li></ul><details id="instances-for-list-Std.Tactic.CollectDependents.State" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.CollectDependents.M"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/PrintDependents.lean#L31-L31">source</a></div><div class="attributes">@[inline, reducible]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.M"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">CollectDependents</span>.<span class="name">M</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>The monad used by <code>CollectDependents</code>.</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.M">Std.Tactic.CollectDependents.M</a> <a href="../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../.././Init/Prelude.html#ReaderT">ReaderT</a> <a href="../.././Lean/Environment.html#Lean.Environment">Lean.Environment</a> <span class="fn">(<span class="fn"><a href="../.././Init/Control/State.html#StateM">StateM</a> <a href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.State">Std.Tactic.CollectDependents.State</a></span>)</span></span></span></li></ul></details><details id="instances-for-list-Std.Tactic.CollectDependents.M" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.CollectDependents.mkState"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/PrintDependents.lean#L39-L40">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.mkState"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">CollectDependents</span>.<span class="name">mkState</span></a></span><span class="decl_args">
<span class="fn">(cs : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a> <a href="../.././Init/Prelude.html#Prod">×</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(otherAxiom : <span class="fn"><a href="../.././Init/Prelude.html#optParam">optParam</a> <a href="../.././Init/Prelude.html#Bool">Bool</a> <a href="../.././Init/Prelude.html#Bool.true">true</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.State">Std.Tactic.CollectDependents.State</a></div></div><p>Constructs the initial state, marking the constants in <code>cs</code>. The result of <code><a href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.collect">collect</a></code> will say
whether a given declaration depends transitively on one of these constants.</p><p>If <code><a href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.State.otherAxiom">otherAxiom</a></code> is true, any axiom not specified in <code>cs</code> will also be tracked.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Std.Tactic.CollectDependents.mkState" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Std.Tactic.CollectDependents.collect"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/PrintDependents.lean#L43-L60">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.collect"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">CollectDependents</span>.<span class="name">collect</span></a></span><span class="decl_args">
<span class="fn">(c : <a href="../.././Init/Prelude.html#Lean.Name">Lean.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.CollectDependents.M">Std.Tactic.CollectDependents.M</a> <a href="../.././Init/Prelude.html#Bool">Bool</a></span></div></div><p>Collect the results for a given constant.</p></div></div><div class="decl" id="Std.Tactic.«command#printDependents___»"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/std4/blob/0d0ac1c43e1ec1965e0806af9e7a32999ea31096/Std/Tactic/PrintDependents.lean#L64-L118">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Std/Tactic/PrintDependents.html#Std.Tactic.«command#printDependents___»"><span class="name">Std</span>.<span class="name">Tactic</span>.<span class="name">«command#printDependents___»</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>The command <code>#print dependents X Y</code> prints a list of all the declarations in the file that
transitively depend on <code>X</code> or <code>Y</code>. After each declaration, it shows the list of all declarations
referred to directly in the body which also depend on <code>X</code> or <code>Y</code>.</p><p>For example, <code>#print axioms bar'</code> below shows that <code>bar'</code> depends on <code><a href="../.././Init/Prelude.html#Classical.choice">Classical.choice</a></code>, but not
why. <code>#print dependents <a href="../.././Init/Prelude.html#Classical.choice">Classical.choice</a></code> says that <code>bar'</code> depends on <code><a href="../.././Init/Prelude.html#Classical.choice">Classical.choice</a></code> because
it uses <code>foo</code> and <code>foo</code> uses <code><a href="../.././Init/Classical.html#Classical.em">Classical.em</a></code>. <code>bar</code> is not listed because it is proved without using
<code><a href="../.././Init/Prelude.html#Classical.choice">Classical.choice</a></code>.</p><pre><code>import <a href="../.././Std/Tactic/PrintDependents.html">Std.Tactic.PrintDependents</a>

theorem foo : x = y ∨ x ≠ y := <a href="../.././Init/Classical.html#Classical.em">Classical.em</a> _
theorem bar : 1 = 1 ∨ 1 ≠ 1 := by simp
theorem bar' : 1 = 1 ∨ 1 ≠ 1 := foo

#print axioms bar'
-- 'bar'' depends on axioms: [Classical.choice, Quot.sound, propext]

#print dependents <a href="../.././Init/Prelude.html#Classical.choice">Classical.choice</a>
-- foo: <a href="../.././Init/Classical.html#Classical.em">Classical.em</a>
-- bar': foo
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Std.Tactic.«command#printDependents___»" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>