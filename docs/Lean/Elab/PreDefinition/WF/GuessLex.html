<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../../../.././style.css"></link><link rel="stylesheet" href="../../../.././src/pygments.css"></link><link rel="shortcut icon" href="../../../.././favicon.ico"></link><link rel="prefetch" href="../../../.././/declarations/declaration-data.bmp" as="image"></link><title>Lean.Elab.PreDefinition.WF.GuessLex</title><script defer="true" src="../../../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../../../.././";</script><script>const MODULE_NAME="Lean.Elab.PreDefinition.WF.GuessLex";</script><script type="module" src="../../../.././jump-src.js"></script><script type="module" src="../../../.././search.js"></script><script type="module" src="../../../.././expand-nav.js"></script><script type="module" src="../../../.././how-about.js"></script><script type="module" src="../../../.././instances.js"></script><script type="module" src="../../../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">PreDefinition</span>.<span class="name">WF</span>.<span class="name">GuessLex</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;
            <button id="search_button" onclick="javascript: form.action='../../../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../../../.././Init.html">Init</a></li><li><a href="../../../.././Lean/Data/Array.html">Lean.Data.Array</a></li><li><a href="../../../.././Lean/Elab/Quotation.html">Lean.Elab.Quotation</a></li><li><a href="../../../.././Lean/Elab/RecAppSyntax.html">Lean.Elab.RecAppSyntax</a></li><li><a href="../../../.././Lean/Meta/CasesOn.html">Lean.Meta.CasesOn</a></li><li><a href="../../../.././Lean/Util/HasConstCache.html">Lean.Util.HasConstCache</a></li><li><a href="../../../.././Lean/Elab/PreDefinition/Basic.html">Lean.Elab.PreDefinition.Basic</a></li><li><a href="../../../.././Lean/Meta/Match/Match.html">Lean.Meta.Match.Match</a></li><li><a href="../../../.././Lean/Meta/Tactic/Cleanup.html">Lean.Meta.Tactic.Cleanup</a></li><li><a href="../../../.././Lean/Meta/Tactic/Refl.html">Lean.Meta.Tactic.Refl</a></li><li><a href="../../../.././Lean/Elab/PreDefinition/Structural/Basic.html">Lean.Elab.PreDefinition.Structural.Basic</a></li><li><a href="../../../.././Lean/Elab/PreDefinition/WF/PackMutual.html">Lean.Elab.PreDefinition.WF.PackMutual</a></li><li><a href="../../../.././Lean/Elab/PreDefinition/WF/TerminationHint.html">Lean.Elab.PreDefinition.WF.TerminationHint</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Lean.Elab.PreDefinition.WF.GuessLex" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.showInferredTerminationBy"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">showInferredTerminationBy</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.naryVarNames"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">naryVarNames</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.naryVarNames.freshen"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">naryVarNames</span>.<span class="name">freshen</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.M"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">M</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.withRecApps"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.withRecApps.processRec"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span>.<span class="name">processRec</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.withRecApps.processApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span>.<span class="name">processApp</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.withRecApps.containsRecFn"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span>.<span class="name">containsRecFn</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.withRecApps.loop"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span>.<span class="name">loop</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.SavedLocalContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">SavedLocalContext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.SavedLocalContext.create"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">SavedLocalContext</span>.<span class="name">create</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.SavedLocalContext.run"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">SavedLocalContext</span>.<span class="name">run</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.RecCallWithContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallWithContext</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.RecCallWithContext.create"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallWithContext</span>.<span class="name">create</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.filterSubsumed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">filterSubsumed</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.collectRecCalls"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">collectRecCalls</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.GuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">GuessLexRel</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.instReprGuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">instReprGuessLexRel</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.instDecidableEqGuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">instDecidableEqGuessLexRel</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.instToStringGuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">instToStringGuessLexRel</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.instToFormatGuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">instToFormatGuessLexRel</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.GuessLexRel.toNatRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">GuessLexRel</span>.<span class="name">toNatRel</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.mkSizeOf"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">mkSizeOf</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.evalRecCall"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">evalRecCall</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.RecCallCache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallCache</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.RecCallCache.mk"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallCache</span>.<span class="name">mk</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.RecCallCache.eval"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallCache</span>.<span class="name">eval</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.RecCallCache.prettyEntry"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallCache</span>.<span class="name">prettyEntry</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.MutualMeasure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">MutualMeasure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.inspectCall"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">inspectCall</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.getForbiddenByTrivialSizeOf"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">getForbiddenByTrivialSizeOf</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.generateCombinations?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateCombinations?</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.generateCombinations?.isForbidden"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateCombinations?</span>.<span class="name">isForbidden</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.generateCombinations?.goUniform"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateCombinations?</span>.<span class="name">goUniform</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.generateCombinations?.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateCombinations?</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.generateMeasures"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateMeasures</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.solve"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">solve</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.solve.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">solve</span>.<span class="name">go</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.mkTupleSyntax"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">mkTupleSyntax</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.buildTermWF"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">buildTermWF</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.formatTable"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">formatTable</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.RecCallWithContext.posString"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallWithContext</span>.<span class="name">posString</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.explainNonMutualFailure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">explainNonMutualFailure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.explainMutualFailure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">explainMutualFailure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.GuessLex.explainFailure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">explainFailure</span></a></div><div class="nav_link"><a class="break_within" href="#Lean.Elab.WF.guessLex"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">guessLex</span></a></div></nav><main>
<div class="mod_doc"><p>This module finds lexicographic termination arguments for well-founded recursion.</p><p>Starting with basic measures (<code>sizeOf xᵢ</code> for all parameters <code>xᵢ</code>), it tries all combinations
until it finds one where all proof obligations go through with the given tactic (<code>decerasing_by</code>),
if given, or the default <code>decreasing_tactic</code>.</p><p>For mutual recursion, a single measure is not just one parameter, but one from each recursive
function. Enumerating these can lead to a combinatoric explosion, so we bound
the nubmer of measures tried.</p><p>In addition to measures derived from <code>sizeOf xᵢ</code>, it also considers measures
that assign an order to the functions themselves. This way we can support mutual
function definitions where no arguments decrease from one function to another.</p><p>The result of this module is a <code>TerminationWF</code>, which is then passed on to <code>wfRecursion</code>; this
design is crucial so that whatever we infer in this module could also be written manually by the
user. It would be bad if there are function definitions that can only be processed with the
guessed lexicographic order.</p><p>The following optimizations are applied to make this feasible:</p><ol>
<li>
<p>The crucial optimiziation is to look at each argument of each recursive call
<em>once</em>, try to prove <code>&lt;</code> and (if that fails <code>≤</code>), and then look at that table to
pick a suitable measure.</p>
</li>
<li>
<p>The next-crucial optimization is to fill that table lazily.  This way, we run the (likely
expensive) tactics as few times as possible, while still being able to consider a possibly
large number of combinations.</p>
</li>
<li>
<p>Before we even try to prove <code>&lt;</code>, we check if the arguments are equal (<code>=</code>). No well-founded
measure will relate equal terms, likely this check is faster than firing up the tactic engine,
and it adds more signal to the output.</p>
</li>
<li>
<p>Instead of traversing the whole function body over and over, we traverse it once and store
the arguments (in unpacked form) and the local <code>MetaM</code> state at each recursive call
(see <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.collectRecCalls">collectRecCalls</a></code>), which we then re-use for the possibly many proof attempts.</p>
</li>
</ol><p>The logic here is based on “Finding Lexicographic Orders for Termination Proofs in Isabelle/HOL”
by Lukas Bulwahn, Alexander Krauss, and Tobias Nipkow, 10.1007/978-3-540-74591-4_5
<https://www21.in.tum.de/~nipkow/pubs/tphols07.pdf>.</p></div><div class="decl" id="Lean.Elab.WF.GuessLex.showInferredTerminationBy"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L70-L73">source</a></div><div class="decl_header"><span class="decl_kind">opaque</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.showInferredTerminationBy"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">showInferredTerminationBy</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Data/Options.html#Lean.Option">Lean.Option</a> <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span></div></div></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.naryVarNames"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L87-L101">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.naryVarNames"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">naryVarNames</span></a></span><span class="decl_args">
<span class="fn">(fixedPrefixSize : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(preDef : <a href="../../../.././Lean/Elab/PreDefinition/Basic.html#Lean.Elab.PreDefinition">Lean.Elab.PreDefinition</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span></div></div><p>Given a predefinition, find good variable names for its parameters.
Use user-given parameter names if present; use x1...xn otherwise.</p><p>The length of the returned array is also used to determine the arity
of the function, so it should match what <code>packDomain</code> does.</p><p>The names ought to accessible (no macro scopes) and still fresh wrt to the current environment,
so that with <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.showInferredTerminationBy">showInferredTerminationBy</a></code> we can print them to the user reliably.
We do that by appending <code>'</code> as needed.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.naryVarNames" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.naryVarNames.freshen"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L97-L101">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.naryVarNames.freshen"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">naryVarNames</span>.<span class="name">freshen</span></a></span><span class="decl_args">
<span class="fn">(ns : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(n : <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span></div></div></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.M"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L105-L106">source</a></div><div class="attributes">@[inline, reducible]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.M"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">M</span></a></span><span class="decl_args">
<span class="fn">(recFnName : <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(α : <a href="../../../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args">
<span class="fn">(β : <a href="../../../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>Internal monad used by <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.withRecApps">withRecApps</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.M">Lean.Elab.WF.GuessLex.M</a> <span class="fn">recFnName</span> <span class="fn">α</span> <span class="fn">β</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../../../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span> <span class="fn">(<span class="fn"><a href="../../../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../../../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <span class="fn">(<span class="fn"><a href="../../../.././Lean/Util/HasConstCache.html#Lean.HasConstCache">Lean.HasConstCache</a> <span class="fn">recFnName</span></span>)</span> <a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a></span>)</span> <span class="fn">β</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.M" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.withRecApps"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L115-L199">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.withRecApps"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(recFnName : <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(fixedPrefixSize : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(param : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span></div></div><p>Traverses the given expression <code>e</code>, and invokes the continuation <code>k</code>
at every saturated call to <code>recFnName</code>.</p><p>The expression <code>param</code> is passed along, and refined when going under a matcher
or <code>casesOn</code> application.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.withRecApps" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.withRecApps.processRec"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L121-L126">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.withRecApps.processRec"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span>.<span class="name">processRec</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(recFnName : <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(fixedPrefixSize : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(param : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.M">Lean.Elab.WF.GuessLex.M</a> <span class="fn">recFnName</span> <span class="fn">α</span> <a href="../../../.././Init/Prelude.html#Unit">Unit</a></span></div></div></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.withRecApps.processApp"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L128-L134">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.withRecApps.processApp"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span>.<span class="name">processApp</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(recFnName : <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(fixedPrefixSize : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(param : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.M">Lean.Elab.WF.GuessLex.M</a> <span class="fn">recFnName</span> <span class="fn">α</span> <a href="../../../.././Init/Prelude.html#Unit">Unit</a></span></div></div></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.withRecApps.containsRecFn"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L136-L137">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.withRecApps.containsRecFn"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span>.<span class="name">containsRecFn</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(recFnName : <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.M">Lean.Elab.WF.GuessLex.M</a> <span class="fn">recFnName</span> <span class="fn">α</span> <a href="../../../.././Init/Prelude.html#Bool">Bool</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.withRecApps.containsRecFn">Lean.Elab.WF.GuessLex.withRecApps.containsRecFn</a> <span class="fn">recFnName</span> <span class="fn">e</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../../../.././Init/Prelude.html#modifyGetThe">modifyGetThe</a> <span class="fn">(<span class="fn"><a href="../../../.././Lean/Util/HasConstCache.html#Lean.HasConstCache">Lean.HasConstCache</a> <span class="fn">recFnName</span></span>)</span> <span class="fn">fun (<span class="fn">x</span> : <span class="fn"><a href="../../../.././Lean/Util/HasConstCache.html#Lean.HasConstCache">Lean.HasConstCache</a> <span class="fn">recFnName</span></span>) =&gt; <span class="fn"><a href="../../../.././Lean/Util/HasConstCache.html#Lean.HasConstCache.contains">Lean.HasConstCache.contains</a> <span class="fn">e</span> <span class="fn">x</span></span></span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.withRecApps.containsRecFn" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.withRecApps.loop"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L139-L199">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.withRecApps.loop"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">withRecApps</span>.<span class="name">loop</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(recFnName : <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a>)</span></span>
<span class="decl_args">
<span class="fn">(fixedPrefixSize : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a> → <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span> → <span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span></span></span>)</span></span>
<span class="decl_args">
<span class="fn">(param : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args">
<span class="fn">(e : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.M">Lean.Elab.WF.GuessLex.M</a> <span class="fn">recFnName</span> <span class="fn">α</span> <a href="../../../.././Init/Prelude.html#Unit">Unit</a></span></div></div></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.SavedLocalContext"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L204-L207">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.SavedLocalContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">SavedLocalContext</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>A <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.SavedLocalContext">SavedLocalContext</a></code> captures the state and local context of a <code>MetaM</code>, to be continued later.</p><ul class="structure_fields" id="Lean.Elab.WF.GuessLex.SavedLocalContext.mk"><li id="Lean.Elab.WF.GuessLex.SavedLocalContext.savedLocalContext" class="structure_field"><div class="structure_field_info">savedLocalContext : <a href="../../../.././Lean/LocalContext.html#Lean.LocalContext">Lean.LocalContext</a></div></li><li id="Lean.Elab.WF.GuessLex.SavedLocalContext.savedLocalInstances" class="structure_field"><div class="structure_field_info">savedLocalInstances : <a href="../../../.././Lean/MetavarContext.html#Lean.LocalInstances">Lean.LocalInstances</a></div></li><li id="Lean.Elab.WF.GuessLex.SavedLocalContext.savedState" class="structure_field"><div class="structure_field_info">savedState : <a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.SavedState">Lean.Meta.SavedState</a></div></li></ul><details id="instances-for-list-Lean.Elab.WF.GuessLex.SavedLocalContext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.SavedLocalContext.create"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L210-L214">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.SavedLocalContext.create"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">SavedLocalContext</span>.<span class="name">create</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.SavedLocalContext">Lean.Elab.WF.GuessLex.SavedLocalContext</a></span></div></div><p>Capture the <code>MetaM</code> state including local context.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.SavedLocalContext.create" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.SavedLocalContext.run"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L217-L222">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.SavedLocalContext.run"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">SavedLocalContext</span>.<span class="name">run</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="decl_args">
<span class="fn">(slc : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.SavedLocalContext">Lean.Elab.WF.GuessLex.SavedLocalContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(k : <span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">α</span></span></div></div><p>Run a <code>MetaM</code> action in the saved state.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.SavedLocalContext.run" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.RecCallWithContext"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L226-L237">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallWithContext</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>A <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext">RecCallWithContext</a></code> focuses on a single recursive call in a unary predefinition,
and runs the given action in the context of that call.</p><ul class="structure_fields" id="Lean.Elab.WF.GuessLex.RecCallWithContext.mk"><li id="Lean.Elab.WF.GuessLex.RecCallWithContext.ref" class="structure_field"><div class="structure_field_info">ref : <a href="../../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></div><div class="structure_field_doc"><p>Syntax location of reursive call</p></div></li><li id="Lean.Elab.WF.GuessLex.RecCallWithContext.caller" class="structure_field"><div class="structure_field_info">caller : <a href="../../../.././Init/Prelude.html#Nat">Nat</a></div><div class="structure_field_doc"><p>Function index of caller</p></div></li><li id="Lean.Elab.WF.GuessLex.RecCallWithContext.params" class="structure_field"><div class="structure_field_info">params : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div><div class="structure_field_doc"><p>Parameters of caller</p></div></li><li id="Lean.Elab.WF.GuessLex.RecCallWithContext.callee" class="structure_field"><div class="structure_field_info">callee : <a href="../../../.././Init/Prelude.html#Nat">Nat</a></div><div class="structure_field_doc"><p>Function index of callee</p></div></li><li id="Lean.Elab.WF.GuessLex.RecCallWithContext.args" class="structure_field"><div class="structure_field_info">args : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div><div class="structure_field_doc"><p>Arguments to callee</p></div></li><li id="Lean.Elab.WF.GuessLex.RecCallWithContext.ctxt" class="structure_field"><div class="structure_field_info">ctxt : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.SavedLocalContext">Lean.Elab.WF.GuessLex.SavedLocalContext</a></div></li></ul><details id="instances-for-list-Lean.Elab.WF.GuessLex.RecCallWithContext" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.RecCallWithContext.create"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L240-L242">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext.create"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallWithContext</span>.<span class="name">create</span></a></span><span class="decl_args">
<span class="fn">(ref : <a href="../../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a>)</span></span>
<span class="decl_args">
<span class="fn">(caller : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(params : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(callee : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(args : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext">Lean.Elab.WF.GuessLex.RecCallWithContext</a></span></div></div><p>Store the current recursive call and its context.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.RecCallWithContext.create" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.filterSubsumed"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L252-L265">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.filterSubsumed"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">filterSubsumed</span></a></span><span class="decl_args">
<span class="fn">(rcs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext">Lean.Elab.WF.GuessLex.RecCallWithContext</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext">Lean.Elab.WF.GuessLex.RecCallWithContext</a></span></div></div><p>The elaborator is prone to duplicate terms, including recursive calls, even if the user
only wrote a single one. This duplication is wasteful if we run the tactics on duplicated
calls, and confusing in the output of GuessLex. So prune the list of recursive calls,
and remove those where another call exists that has the same goal and context that is no more
specific.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.filterSubsumed" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.collectRecCalls"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L270-L285">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.collectRecCalls"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">collectRecCalls</span></a></span><span class="decl_args">
<span class="fn">(unaryPreDef : <a href="../../../.././Lean/Elab/PreDefinition/Basic.html#Lean.Elab.PreDefinition">Lean.Elab.PreDefinition</a>)</span></span>
<span class="decl_args">
<span class="fn">(fixedPrefixSize : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(arities : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext">Lean.Elab.WF.GuessLex.RecCallWithContext</a></span>)</span></span></div></div><p>Traverse a unary PreDefinition, and returns a <code>WithRecCall</code> closure for each recursive
call site.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.collectRecCalls" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.GuessLexRel"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L289-L290">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">GuessLexRel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>A <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">GuessLexRel</a></code> described how a recursive call affects a measure; whether it
decreases strictly, non-strictly, is equal, or else.</p><ul class="constructors"><li class="constructor" id="Lean.Elab.WF.GuessLex.GuessLexRel.lt">lt: <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></li><li class="constructor" id="Lean.Elab.WF.GuessLex.GuessLexRel.eq">eq: <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></li><li class="constructor" id="Lean.Elab.WF.GuessLex.GuessLexRel.le">le: <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></li><li class="constructor" id="Lean.Elab.WF.GuessLex.GuessLexRel.no_idea">no_idea: <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></li></ul><details id="instances-for-list-Lean.Elab.WF.GuessLex.GuessLexRel" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.instReprGuessLexRel"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L290-L290">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.instReprGuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">instReprGuessLexRel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Data/Repr.html#Repr">Repr</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.instReprGuessLexRel">Lean.Elab.WF.GuessLex.instReprGuessLexRel</a> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn">{ <span class="fn">reprPrec</span> := <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#_private.Lean.Elab.PreDefinition.WF.GuessLex.0.Lean.Elab.WF.GuessLex.reprGuessLexRel._@.Lean.Elab.PreDefinition.WF.GuessLex._hyg.2322">Lean.Elab.WF.GuessLex.reprGuessLexRel✝</a> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.instDecidableEqGuessLexRel"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L290-L290">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.instDecidableEqGuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">instDecidableEqGuessLexRel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Prelude.html#DecidableEq">DecidableEq</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.instToStringGuessLexRel"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L292-L296">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.instToStringGuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">instToStringGuessLexRel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Data/ToString/Basic.html#ToString">ToString</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.instToFormatGuessLexRel"><div class="instance"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L298-L299">source</a></div><div class="decl_header"><span class="decl_kind">instance</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.instToFormatGuessLexRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">instToFormatGuessLexRel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Data/Format/Basic.html#Std.ToFormat">Lean.ToFormat</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.instToFormatGuessLexRel">Lean.Elab.WF.GuessLex.instToFormatGuessLexRel</a> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">{ <span class="fn">format</span> := <span class="fn">fun (<span class="fn">r</span> : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a>) =&gt; <span class="fn"><a href="../../../.././Init/Data/Format/Basic.html#Std.Format.text">Std.Format.text</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Data/ToString/Basic.html#ToString.toString">toString</a> <span class="fn">r</span></span>)</span></span></span> }</span></span></li></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.GuessLexRel.toNatRel"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L302-L306">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel.toNatRel"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">GuessLexRel</span>.<span class="name">toNatRel</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a> → <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Given a <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">GuessLexRel</a></code>, produce a binary <code>Expr</code> that relates two <code><a href="../../../.././Init/Prelude.html#Nat">Nat</a></code> values accordingly.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.GuessLexRel.toNatRel" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.mkSizeOf"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L309-L315">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.mkSizeOf"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">mkSizeOf</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Given an expression <code>e</code>, produce <code>sizeOf e</code> with a suitable instance.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.mkSizeOf" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.evalRecCall"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L321-L361">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.evalRecCall"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">evalRecCall</span></a></span><span class="decl_args">
<span class="fn">(decrTactic? : <span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <a href="../../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(rcc : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext">Lean.Elab.WF.GuessLex.RecCallWithContext</a>)</span></span>
<span class="decl_args">
<span class="fn">(paramIdx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(argIdx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span></div></div><p>For a given recursive call, and a choice of parameter and argument index,
try to prove equality, < or ≤.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.evalRecCall" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.RecCallCache"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L364-L367">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallCache</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><ul class="structure_ext"><li id="Lean.Elab.WF.GuessLex.RecCallCache.mk''" class="structure_ext_ctor">mk'' :: (</li><ul class="structure_ext_fields"><li id="Lean.Elab.WF.GuessLex.RecCallCache.decrTactic?" class="structure_field"><div class="structure_field_info">decrTactic? : <span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <a href="../../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span></div></li><li id="Lean.Elab.WF.GuessLex.RecCallCache.rcc" class="structure_field"><div class="structure_field_info">rcc : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext">Lean.Elab.WF.GuessLex.RecCallWithContext</a></div></li><li id="Lean.Elab.WF.GuessLex.RecCallCache.cache" class="structure_field"><div class="structure_field_info">cache : <span class="fn"><a href="../../../.././Init/System/IO.html#IO.Ref">IO.Ref</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span>)</span></span>)</span></span>)</span></span></div></li></ul><li class="structure_ext_ctor">)</li></ul><details id="instances-for-list-Lean.Elab.WF.GuessLex.RecCallCache" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.RecCallCache.mk"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L370-L373">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache.mk"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallCache</span>.<span class="name">mk</span></a></span><span class="decl_args">
<span class="fn">(decrTactic? : <span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <a href="../../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(rcc : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext">Lean.Elab.WF.GuessLex.RecCallWithContext</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/System/IO.html#BaseIO">BaseIO</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache">Lean.Elab.WF.GuessLex.RecCallCache</a></span></div></div><p>Create a cache to memoize calls to <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.evalRecCall">evalRecCall</a> descTactic? <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache.rcc">rcc</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.RecCallCache.mk" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.RecCallCache.eval"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L376-L383">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache.eval"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallCache</span>.<span class="name">eval</span></a></span><span class="decl_args">
<span class="fn">(rc : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache">Lean.Elab.WF.GuessLex.RecCallCache</a>)</span></span>
<span class="decl_args">
<span class="fn">(paramIdx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(argIdx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span></div></div><p>Run <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.evalRecCall">evalRecCall</a></code> and cache there result</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.RecCallCache.eval" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.RecCallCache.prettyEntry"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L387-L391">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache.prettyEntry"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallCache</span>.<span class="name">prettyEntry</span></a></span><span class="decl_args">
<span class="fn">(rcc : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache">Lean.Elab.WF.GuessLex.RecCallCache</a>)</span></span>
<span class="decl_args">
<span class="fn">(paramIdx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(argIdx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Init/Prelude.html#String">String</a></span></div></div><p>Print a single cache entry as a string, without forcing it</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.RecCallCache.prettyEntry" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.MutualMeasure"><div class="inductive"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L395-L399">source</a></div><div class="decl_header"><span class="decl_kind">inductive</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.MutualMeasure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">MutualMeasure</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././foundational_types.html">Type</a></div></div><p>The measures that we order lexicographically can be comparing arguments,
or numbering the functions</p><ul class="constructors"><li class="constructor" id="Lean.Elab.WF.GuessLex.MutualMeasure.args">args: <span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span> → <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.MutualMeasure">Lean.Elab.WF.GuessLex.MutualMeasure</a></span><div class="inductive_ctor_doc"><p>For every function, the given argument index</p></div></li><li class="constructor" id="Lean.Elab.WF.GuessLex.MutualMeasure.func">func: <span class="fn"><a href="../../../.././Init/Prelude.html#Nat">Nat</a> → <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.MutualMeasure">Lean.Elab.WF.GuessLex.MutualMeasure</a></span><div class="inductive_ctor_doc"><p>The given function index is assigned 1, the rest 0</p></div></li></ul><details id="instances-for-list-Lean.Elab.WF.GuessLex.MutualMeasure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.inspectCall"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L402-L413">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.inspectCall"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">inspectCall</span></a></span><span class="decl_args">
<span class="fn">(rc : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache">Lean.Elab.WF.GuessLex.RecCallCache</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.MutualMeasure">Lean.Elab.WF.GuessLex.MutualMeasure</a> → <span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span></span></div></div><p>Evaluate a recursive call at a given <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.MutualMeasure">MutualMeasure</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.inspectCall" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.getForbiddenByTrivialSizeOf"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L422-L432">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.getForbiddenByTrivialSizeOf"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">getForbiddenByTrivialSizeOf</span></a></span><span class="decl_args">
<span class="fn">(fixedPrefixSize : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(preDef : <a href="../../../.././Lean/Elab/PreDefinition/Basic.html#Lean.Elab.PreDefinition">Lean.Elab.PreDefinition</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span></div></div><p>Given a predefinition with value <code>fun (x_₁ ... xₙ) (y_₁ : α₁)... (yₘ : αₘ) =&gt; ...</code>,
where <code>n = fixedPrefixSize</code>, return an array <code>A</code> s.t. <code>i ∈ A</code> iff <code>sizeOf yᵢ</code> reduces to a literal.
This is the case for types such as <code>Prop</code>, <code>Type u</code>, etc.
These arguments should not be considered when guessing a well-founded relation.
See <code><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.generateCombinations?">generateCombinations?</a></code></p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.getForbiddenByTrivialSizeOf" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.generateCombinations?"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L441-L470">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.generateCombinations?"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateCombinations?</span></a></span><span class="decl_args">
<span class="fn">(forbiddenArgs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(numArgs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(threshold : <span class="fn"><a href="../../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">32</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>)</span></span></div></div><p>Generate all combination of arguments, skipping those that are forbidden.</p><p>Sorts the uniform combinations ([0,0,0], [1,1,1]) to the front; they are commonly most useful to
try first, when the mutually recursive functions have similar argument structures</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.generateCombinations?" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.generateCombinations?.isForbidden"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L445-L449">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.generateCombinations?.isForbidden"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateCombinations?</span>.<span class="name">isForbidden</span></a></span><span class="decl_args">
<span class="fn">(forbiddenArgs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(fidx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(argIdx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../../../.././Init/Prelude.html#Bool">Bool</a></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.generateCombinations?.isForbidden">Lean.Elab.WF.GuessLex.generateCombinations?.isForbidden</a> <span class="fn">forbiddenArgs</span> <span class="fn">fidx</span> <span class="fn">argIdx</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a>   <span class="fn">if h : <span class="fn"><span class="fn">fidx</span> <a href="../../../.././Init/Prelude.html#LT.lt">&lt;</a> <span class="fn"><a href="../../../.././Init/Prelude.html#Array.size">Array.size</a> <span class="fn">forbiddenArgs</span></span></span> then <span class="fn"><a href="../../../.././Init/Data/Array/Basic.html#Array.contains">Array.contains</a> <span class="fn"><span class="fn">forbiddenArgs</span>[<span class="fn">fidx</span>]</span> <span class="fn">argIdx</span></span> else <a href="../../../.././Init/Prelude.html#Bool.false">false</a></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.generateCombinations?.isForbidden" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.generateCombinations?.goUniform"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L452-L456">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.generateCombinations?.goUniform"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateCombinations?</span>.<span class="name">goUniform</span></a></span><span class="decl_args">
<span class="fn">(forbiddenArgs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(numArgs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(argIdx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Control/Option.html#OptionT">OptionT</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Control/State.html#StateM">StateM</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>)</span></span>)</span> <a href="../../../.././Init/Prelude.html#Unit">Unit</a></span></div></div></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.generateCombinations?.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L459-L470">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.generateCombinations?.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateCombinations?</span>.<span class="name">go</span></a></span><span class="decl_args">
<span class="fn">(forbiddenArgs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(numArgs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(threshold : <span class="fn"><a href="../../../.././Init/Prelude.html#optParam">optParam</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a> <span class="fn">32</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(fidx : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Init/Control/Option.html#OptionT">OptionT</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#ReaderT">ReaderT</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span> <span class="fn">(<span class="fn"><a href="../../../.././Init/Control/State.html#StateM">StateM</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>)</span></span>)</span></span>)</span> <a href="../../../.././Init/Prelude.html#Unit">Unit</a></span></div></div></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.generateMeasures"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L477-L488">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.generateMeasures"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">generateMeasures</span></a></span><span class="decl_args">
<span class="fn">(forbiddenArgs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(arities : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Nat">Nat</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.MutualMeasure">Lean.Elab.WF.GuessLex.MutualMeasure</a></span>)</span></span></div></div><p>Enumerate all meausures we want to try: All arguments (resp. combinations thereof) and
possible orderings of functions (if more than one)</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.generateMeasures" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.solve"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L499-L527">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.solve"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">solve</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../../../.././foundational_types.html">Type</a> → <a href="../../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(measures : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(calls : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><span class="fn">α</span> → <span class="fn"><span class="fn">m</span> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span></span>)</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span>)</span></span></div></div><p>The core logic of guessing the lexicographic order
Given a matrix that for each call and measure indicates whether that measure is
decreasing, equal, less-or-equal or unknown, It finds a sequence of measures
that is lexicographically decreasing.</p><p>The matrix is implemented here as an array of monadic query methods only so that
we can fill is lazily. Morally, this is a pure function</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.solve">Lean.Elab.WF.GuessLex.solve</a> <span class="fn">measures</span> <span class="fn">calls</span></span> <a href="../../../.././Init/Prelude.html#Eq">=</a> <span class="fn"><a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.solve.go">Lean.Elab.WF.GuessLex.solve.go</a> <span class="fn">measures</span> <span class="fn">calls</span> <span class="fn">#[]</span></span></span></li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.solve" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.solve.go"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L503-L527">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.solve.go"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">solve</span>.<span class="name">go</span></a></span><span class="impl_arg"><span class="decl_args">
<span class="fn">{m : <span class="fn"><a href="../../../.././foundational_types.html">Type</a> → <a href="../../../.././foundational_types.html">Type</a></span>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">{α : <a href="../../../.././foundational_types.html">Type</a>}</span></span>
</span><span class="impl_arg"><span class="decl_args">
<span class="fn">[<span class="fn"><a href="../../../.././Init/Prelude.html#Monad">Monad</a> <span class="fn">m</span></span>]</span></span>
</span><span class="decl_args">
<span class="fn">(measures : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(calls : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><span class="fn">α</span> → <span class="fn"><span class="fn">m</span> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.GuessLexRel">Lean.Elab.WF.GuessLex.GuessLexRel</a></span></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(acc : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn">m</span> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">α</span></span>)</span></span>)</span></span></div></div></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.mkTupleSyntax"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L532-L535">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.mkTupleSyntax"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">mkTupleSyntax</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span> → <span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Init/Meta.html#Lean.Syntax.Term">Lean.Term</a></span></span></div></div><p>Create Tuple syntax (<code>()</code> if the array is empty, and just the value if its a singleton)</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.mkTupleSyntax" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.buildTermWF"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L541-L560">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.buildTermWF"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">buildTermWF</span></a></span><span class="decl_args">
<span class="fn">(declNames : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(varNamess : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(measures : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.MutualMeasure">Lean.Elab.WF.GuessLex.MutualMeasure</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/TerminationHint.html#Lean.Elab.WF.TerminationWF">Lean.Elab.WF.TerminationWF</a></span></div></div><p>Given an array of <code>MutualMeasures</code>, creates a <code>TerminationWF</code> that specifies the lexicographic
combination of these measures.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.buildTermWF" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.formatTable"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L568-L589">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.formatTable"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">formatTable</span></a></span><span class="decl_args"> :</span><div class="decl_type"><span class="fn"><span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#String">String</a></span>)</span></span> → <a href="../../../.././Init/Prelude.html#String">String</a></span></div></div><p>Given a matrix (row-major) of strings, arranges them in tabular form.
First column is left-aligned, others right-aligned.
Single space as column separator.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.formatTable" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.RecCallWithContext.posString"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L592-L604">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext.posString"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">RecCallWithContext</span>.<span class="name">posString</span></a></span><span class="decl_args">
<span class="fn">(rcc : <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallWithContext">Lean.Elab.WF.GuessLex.RecCallWithContext</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Init/Prelude.html#String">String</a></span></div></div><p>Concise textual representation of the source location of a recursive call</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.RecCallWithContext.posString" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.explainNonMutualFailure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L608-L617">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.explainNonMutualFailure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">explainNonMutualFailure</span></a></span><span class="decl_args">
<span class="fn">(varNames : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(rcs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache">Lean.Elab.WF.GuessLex.RecCallCache</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Init/Data/Format/Basic.html#Std.Format">Lean.Format</a></span></div></div><p>Explain what we found out about the recursive calls (non-mutual case)</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.explainNonMutualFailure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.explainMutualFailure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L620-L647">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.explainMutualFailure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">explainMutualFailure</span></a></span><span class="decl_args">
<span class="fn">(declNames : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(varNamess : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(rcs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache">Lean.Elab.WF.GuessLex.RecCallCache</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Init/Data/Format/Basic.html#Std.Format">Lean.Format</a></span></div></div><p>Explain what we found out about the recursive calls (mutual case)</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.explainMutualFailure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.GuessLex.explainFailure"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L649-L657">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.explainFailure"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">GuessLex</span>.<span class="name">explainFailure</span></a></span><span class="decl_args">
<span class="fn">(declNames : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(varNamess : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <span class="fn">(<span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Init/Prelude.html#Lean.Name">Lake.Name</a></span>)</span></span>)</span></span>
<span class="decl_args">
<span class="fn">(rcs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.GuessLex.RecCallCache">Lean.Elab.WF.GuessLex.RecCallCache</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Init/Data/Format/Basic.html#Std.Format">Lean.Format</a></span></div></div><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.GuessLex.explainFailure" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Lean.Elab.WF.guessLex"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover/lean4/blob/b614ff1d12bc38f39077f9ce9f2d48b42c003ad0/src/Lean/Elab/PreDefinition/WF/GuessLex.lean#L671-L711">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../../../.././Lean/Elab/PreDefinition/WF/GuessLex.html#Lean.Elab.WF.guessLex"><span class="name">Lean</span>.<span class="name">Elab</span>.<span class="name">WF</span>.<span class="name">guessLex</span></a></span><span class="decl_args">
<span class="fn">(preDefs : <span class="fn"><a href="../../../.././Init/Prelude.html#Array">Array</a> <a href="../../../.././Lean/Elab/PreDefinition/Basic.html#Lean.Elab.PreDefinition">Lean.Elab.PreDefinition</a></span>)</span></span>
<span class="decl_args">
<span class="fn">(unaryPreDef : <a href="../../../.././Lean/Elab/PreDefinition/Basic.html#Lean.Elab.PreDefinition">Lean.Elab.PreDefinition</a>)</span></span>
<span class="decl_args">
<span class="fn">(fixedPrefixSize : <a href="../../../.././Init/Prelude.html#Nat">Nat</a>)</span></span>
<span class="decl_args">
<span class="fn">(decrTactic? : <span class="fn"><a href="../../../.././Init/Prelude.html#Option">Option</a> <a href="../../../.././Init/Prelude.html#Lean.Syntax">Lean.Syntax</a></span>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../../../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a> <a href="../../../.././Lean/Elab/PreDefinition/WF/TerminationHint.html#Lean.Elab.WF.TerminationWF">Lean.Elab.WF.TerminationWF</a></span></div></div><p>Main entry point of this module:</p><p>Try to find a lexicographic ordering of the arguments for which the recursive definition
terminates. See the module doc string for a high-level overview.</p><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Lean.Elab.WF.guessLex" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../../../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>