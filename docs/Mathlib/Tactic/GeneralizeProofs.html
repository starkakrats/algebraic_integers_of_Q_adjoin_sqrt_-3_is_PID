<html lang="en"><head><meta charset="UTF-8"></meta><meta name="viewport" content="width=device-width, initial-scale=1"></meta><link rel="stylesheet" href="../.././style.css"></link><link rel="stylesheet" href="../.././src/pygments.css"></link><link rel="shortcut icon" href="../.././favicon.ico"></link><link rel="prefetch" href="../.././/declarations/declaration-data.bmp" as="image"></link><title>Mathlib.Tactic.GeneralizeProofs</title><script defer="true" src="../.././mathjax-config.js"></script><script defer="true" src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script defer="true" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script><script>const SITE_ROOT="../.././";</script><script>const MODULE_NAME="Mathlib.Tactic.GeneralizeProofs";</script><script type="module" src="../.././jump-src.js"></script><script type="module" src="../.././search.js"></script><script type="module" src="../.././expand-nav.js"></script><script type="module" src="../.././how-about.js"></script><script type="module" src="../.././instances.js"></script><script type="module" src="../.././importedBy.js"></script></head><body><input id="nav_toggle" type="checkbox"></input><header><h1><label for="nav_toggle"></label><span>Documentation</span></h1><h2 class="header_filename break_within"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span></h2><form action="https://google.com/search" method="get" id="search_form"><input type="hidden" name="sitesearch" value="https://leanprover-community.github.io/mathlib4_docs"></input><input type="text" name="q" autocomplete="off"></input>&#32;
            <button id="search_button" onclick="javascript: form.action='../.././search.html';">Search</button><button>Google site search</button></form></header><nav class="internal_nav"><p><a href="#top">return to top</a></p><p class="gh_nav_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/Tactic/GeneralizeProofs.lean">source</a></p><div class="imports"><details><summary>Imports</summary><ul><li><a href="../.././Init.html">Init</a></li><li><a href="../.././Lean/Meta/AbstractNestedProofs.html">Lean.Meta.AbstractNestedProofs</a></li><li><a href="../.././Mathlib/Lean/Expr/Basic.html">Mathlib.Lean.Expr.Basic</a></li></ul></details><details><summary>Imported by</summary><ul id="imported-by-Mathlib.Tactic.GeneralizeProofs" class="imported-by-list"></ul></details></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.State"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">State</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.M"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">M</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.visit"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">visit</span></a></div><div class="nav_link"><a class="break_within" href="#Mathlib.Tactic.GeneralizeProofs.generalizeProofs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">generalizeProofs</span></a></div></nav><main>
<div class="mod_doc"><h1 class="markdown-heading" id="The-generalize-proofs-tactic">The <code>generalize_proofs</code> tactic <a class="hover-link" href="#The-generalize-proofs-tactic">#</a></h1><p>Generalize any proofs occurring in the goal or in chosen hypotheses, replacing them by
named hypotheses so that they can be referred to later in the proof easily.
Commonly useful when dealing with functions like <code><a href="../.././Init/Classical.html#Classical.choose">Classical.choose</a></code> that produce data from proofs.</p><p>For example:</p><pre><code class="language-lean">example : List.nthLe [1, 2] 1 dec_trivial = 2 := by
  -- ⊢ [1, 2].nthLe 1 _ = 2
  generalize_proofs h,
  -- h : 1 &lt; [1, 2].length
  -- ⊢ [1, 2].nthLe 1 h = 2
</code></pre></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.State"><div class="structure"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/Tactic/GeneralizeProofs.lean#L34-L38">source</a></div><div class="decl_header"><span class="decl_kind">structure</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.State"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">State</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>State for the generalize proofs tactic, contains the remaining names to be used and the
list of generalizations so far</p><ul class="structure_fields" id="Mathlib.Tactic.GeneralizeProofs.State.mk"><li id="Mathlib.Tactic.GeneralizeProofs.State.nextIdx" class="structure_field"><div class="structure_field_info">nextIdx : <span class="fn"><a href="../.././Init/Prelude.html#List">List</a> <span class="fn">(<span class="fn"><a href="../.././Init/Prelude.html#Lean.TSyntax">Lean.TSyntax</a> <span class="fn">`Lean.binderIdent</span></span>)</span></span></div><div class="structure_field_doc"><p>The user provided names, may be anonymous</p></div></li><li id="Mathlib.Tactic.GeneralizeProofs.State.curIdx" class="structure_field"><div class="structure_field_info">curIdx : <span class="fn"><a href="../.././Init/Prelude.html#Array">Array</a> <a href="../.././Lean/Meta/Tactic/Generalize.html#Lean.Meta.GeneralizeArg">Lean.Meta.GeneralizeArg</a></span></div><div class="structure_field_doc"><p>The generalizations made so far</p></div></li></ul><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.State" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.M"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/Tactic/GeneralizeProofs.lean#L42-L42">source</a></div><div class="attributes">@[inline, reducible]</div>
<div class="decl_header"><span class="decl_kind">abbrev</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.M"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">M</span></a></span><span class="decl_args">
<span class="fn">(α : <a href="../.././foundational_types.html">Type</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><a href="../.././foundational_types.html">Type</a></div></div><p>Monad used by the <code><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.generalizeProofs">generalizeProofs</a></code> tactic, carries an expr cache and state with
names to use and previous generalizations</p><details><summary>Equations</summary><ul class="equations"><li class="equation"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.M">Mathlib.Tactic.GeneralizeProofs.M</a> <a href="../.././Init/Prelude.html#Eq">=</a>   <span class="fn"><a href="../.././Lean/Util/MonadCache.html#Lean.MonadCacheT">Lean.MonadCacheT</a> <a href="../.././Lean/Expr.html#Lean.ExprStructEq">Lean.ExprStructEq</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>
    <span class="fn">(<span class="fn"><a href="../.././Init/Control/StateRef.html#StateRefT'">StateRefT'</a> <a href="../.././Init/System/IO.html#IO.RealWorld">IO.RealWorld</a> <a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.State">Mathlib.Tactic.GeneralizeProofs.State</a> <a href="../.././Lean/Meta/Basic.html#Lean.Meta.MetaM">Lean.MetaM</a></span>)</span></span></span></li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.M" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.visit"><div class="opaque"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/Tactic/GeneralizeProofs.lean#L57-L88">source</a></div><div class="decl_header"><span class="decl_kind">partial def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.visit"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">visit</span></a></span><span class="decl_args">
<span class="fn">(e : <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a>)</span></span>
<span class="decl_args"> :</span><div class="decl_type"><span class="fn"><a href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.M">Mathlib.Tactic.GeneralizeProofs.M</a> <a href="../.././Lean/Expr.html#Lean.Expr">Lean.Expr</a></span></div></div><p>Recursively generalize proofs occurring in e</p></div></div><div class="decl" id="Mathlib.Tactic.GeneralizeProofs.generalizeProofs"><div class="def"><div class="gh_link"><a href="https://github.com/leanprover-community/mathlib4/blob/8c661e5492d1852ac9a417cfc675b6545d77c4b7/Mathlib/Tactic/GeneralizeProofs.lean#L90-L116">source</a></div><div class="decl_header"><span class="decl_kind">def</span>
<span class="decl_name"><a class="break_within" href="../.././Mathlib/Tactic/GeneralizeProofs.html#Mathlib.Tactic.GeneralizeProofs.generalizeProofs"><span class="name">Mathlib</span>.<span class="name">Tactic</span>.<span class="name">GeneralizeProofs</span>.<span class="name">generalizeProofs</span></a></span><span class="decl_args"> :</span><div class="decl_type"><a href="../.././Init/Prelude.html#Lean.ParserDescr">Lean.ParserDescr</a></div></div><p>Generalize proofs in the goal, naming them with the provided list.</p><p>For example:</p><pre><code class="language-lean">example : List.nthLe [1, 2] 1 dec_trivial = 2 := by
  -- ⊢ [1, 2].nthLe 1 _ = 2
  generalize_proofs h,
  -- h : 1 &lt; [1, 2].length
  -- ⊢ [1, 2].nthLe 1 h = 2
</code></pre><details><summary>Equations</summary><ul class="equations"><li class="equation">One or more equations did not get rendered due to their size.</li></ul></details><details id="instances-for-list-Mathlib.Tactic.GeneralizeProofs.generalizeProofs" class="instances-for-list"><summary>Instances For</summary><ul class="instances-for-enum"></ul></details></div></div></main>
<nav class="nav"><iframe src="../.././navbar.html" class="navframe" frameBorder="0"></iframe></nav></body></html>